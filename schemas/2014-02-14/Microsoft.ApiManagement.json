{
  "id": "http://schema.management.azure.com/schemas/2014-02-14/Microsoft.ApiManagement.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.ApiManagement",
  "description": "Microsoft ApiManagement Resource Types",
  "resourceDefinitions": {
    "service": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.ApiManagement/service"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2014-02-14"
          ]
        },
        "location": {
          "type": "string",
          "description": "APIManagement service location"
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Resource tags"
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/APIManagementServiceProperties"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "type",
        "apiVersion",
        "location",
        "properties"
      ],
      "description": "Microsoft.ApiManagement/service"
    }
  },
  "definitions": {
    "AdditionalLocation": {
      "type": "object",
      "properties": {
        "location": {
          "type": "string"
        },
        "skuType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Developer",
                "Standard",
                "Premium"
              ]
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "What type of ApiManagement SKU to deploy. Valid values: (Premium)."
        },
        "skuUnitCount": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "How many units of APIManagement SKU to deploy. Valid values: for Developer (1), for Standard (1, 2, 3, 4), for Premium (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)"
        },
        "vpnconfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/VirtualNetworkConfiguration"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "location",
        "skuType",
        "skuUnitCount"
      ]
    },
    "APIManagementServiceProperties": {
      "type": "object",
      "properties": {
        "publisherEmail": {
          "type": "string"
        },
        "publisherName": {
          "type": "string"
        },
        "sku": {
          "oneOf": [
            {
              "$ref": "#/definitions/Sku"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        },
        "hostnameConfigurations": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/HostnameConfiguration"
              }
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        },
        "additionalLocations": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AdditionalLocation"
              }
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        },
        "vpnconfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/VirtualNetworkConfiguration"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "publisherEmail",
        "publisherName",
        "sku"
      ]
    },
    "CertificateInformation": {
      "type": "object",
      "properties": {
        "expiry": {
          "type": "string",
          "format": "date-time"
        },
        "thumbprint": {
          "type": "string"
        },
        "subject": {
          "type": "string"
        }
      },
      "required": [
        "expiry",
        "thumbprint",
        "subject"
      ]
    },
    "HostnameConfiguration": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Proxy",
            "Portal"
          ]
        },
        "hostname": {
          "type": "string"
        },
        "certificate": {
          "oneOf": [
            {
              "$ref": "#/definitions/CertificateInformation"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "type",
        "hostname",
        "certificate"
      ]
    },
    "Sku": {
      "type": "object",
      "properties": {
        "name": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Developer",
                "Standard",
                "Premium"
              ]
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "What type of ApiManagement SKU to deploy. Valid values: (Developer, Standard, Premium)."
        },
        "capacity": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "How many units of APIManagement SKU to deploy. Valid values: for Developer (1), for Standard (1, 2, 3, 4), for Premium (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)"
        }
      }
    },
    "VirtualNetworkConfiguration": {
      "type": "object",
      "properties": {
        "vnetid": {
          "type": "string",
          "format": "guid"
        },
        "subnetname": {
          "type": "string"
        },
        "location": {
          "type": "string"
        }
      },
      "required": [
        "vnetid",
        "subnetname",
        "location"
      ]
    }
  }
}