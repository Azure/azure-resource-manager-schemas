{
  "id": "http://schema.management.azure.com/schemas/2015-10-01/Microsoft.DataFactory.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.DataFactory",
  "description": "Microsoft Azure Data Factory Resource Types",
  "resourceDefinitions": {
    "dataFactories": {
      "description": "The top level DataPipeline resource container.",
      "allOf": [
        {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "enum": [ "Microsoft.DataFactory/datafactories" ]
            }
          }
        },
        {
          "$ref": "#/definitions/dataFactoryCommon"
        }
      ]
    },
    "linkedServices": {
      "description": "Defines the information needed for Data Factory to connect to external resources.",
      "allOf": [
        {
          "$ref": "#/definitions/linkedServiceCommon"
        },
        {
          "required": [ "type" ],
          "properties": {
            "type": {
              "enum": [ "Microsoft.Datafactory/datafactories/linkedservices" ]
            }
          }
        }
      ]
    },
    "datasets": {
      "description": "A named reference/pointer to the data to be used as an input or an output of an Activity. Datasets identify data structures within different data stores including tables, files, folders and documents.",
      "allOf": [
        {
          "$ref": "#/definitions/datasetCommon"
        },
        {
          "required": [ "type" ],
          "properties": {
            "type": {
              "enum": [ "Microsoft.Datafactory/datafactories/datasets" ]
            }
          }
        }
      ]
    },
    "pipelines": {
      "description": "A logical grouping of Activities. that operate as a unit that together perform a task.",
      "allOf": [
        {
          "$ref": "#/definitions/pipelineCommon"
        },
        {
          "required": [ "type" ],
          "properties": {
            "type": {
              "enum": [ "Microsoft.DataFactory/datafactories/pipelines" ]
            }
          }
        }
      ]
    }
  },
  "definitions": {
    "dataFactoryCommon": {
      "allOf": [
        {
          "$ref": "http://datafactories.schema.management.azure.com/schemas/2015-10-01/Microsoft.DataFactory.DataFactory.json"
        },
        {
          "type": "object",
          "required": [ "apiVersion" ],
          "properties": {
            "apiVersion": {
              "enum": [
                "2015-10-01"
              ]
            },
            "resources": {
              "type": "array",
              "items": {
                "oneOf": [
                  {
                    "$ref": "#/definitions/linkedServiceChild"
                  },
                  {
                    "$ref": "#/definitions/datasetChild"
                  },
                  {
                    "$ref": "#/definitions/pipelineChild"
                  }
                ]
              }
            }
          }
        }
      ]
    },
    "linkedServiceCommon": {
      "allOf": [
        {
          "required": [ "apiVersion" ],
          "properties": {
            "apiVersion": {
              "enum": [
                "2015-10-01"
              ]
            }
          }
        },
        {
          "$ref": "http://datafactories.schema.management.azure.com/schemas/2015-10-01/Microsoft.DataFactory.LinkedService.json"
        }
      ]
    },
    "linkedServiceChild": {
      "allOf": [
        {
          "$ref": "#/definitions/linkedServiceCommon"
        },
        {
          "required": [ "type" ],
          "properties": {
            "type": {
              "enum": [ "linkedservices" ]
            }
          }
        }
      ]
    },
    "datasetCommon": {
      "allOf": [
        {
          "required": [ "apiVersion" ],
          "properties": {
            "apiVersion": {
              "enum": [
                "2015-10-01"
              ]
            }
          }
        },
        {
          "$ref": "http://datafactories.schema.management.azure.com/schemas/2015-10-01/Microsoft.DataFactory.Dataset.json"
        }
      ]
    },
    "datasetChild": {
      "allOf": [
        {
          "$ref": "#/definitions/datasetCommon"
        },
        {
          "required": [ "type" ],
          "properties": {
            "type": {
              "enum": [ "datasets" ]
            }
          }
        }
      ]
    },
    "pipelineCommon": {
      "allOf": [
        {
          "required": [ "apiVersion" ],
          "properties": {
            "apiVersion": {
              "enum": [
                "2015-10-01"
              ]
            }
          }
        },
        {
          "$ref": "http://datafactories.schema.management.azure.com/schemas/2015-10-01/Microsoft.DataFactory.Pipeline.json"
        }
      ]
    },
    "pipelineChild": {
      "allOf": [
        {
          "$ref": "#/definitions/pipelineCommon"
        },
        {
          "required": [ "type" ],
          "properties": {
            "type": {
              "enum": [ "pipelines" ]
            }
          }
        }
      ]
    }
  }
}
