{
  "id": "https://schema.management.azure.com/schemas/2018-03-31-preview/Microsoft.DataMigration.json#",
  "title": "Microsoft.DataMigration",
  "description": "Microsoft DataMigration Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "services_projects_tasks": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-03-31-preview"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.DataMigration/services/projects/tasks"
          ]
        },
        "etag": {
          "type": "string",
          "description": "HTTP strong entity tag value. This is ignored if submitted."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ProjectTaskProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Custom task properties"
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.DataMigration/services/projects/tasks"
    },
    "services_projects": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-03-31-preview"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.DataMigration/services/projects"
          ]
        },
        "location": {
          "type": "string",
          "description": "Resource location."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ProjectProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Project properties"
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/services_projects_tasks_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.DataMigration/services/projects"
    },
    "services": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-03-31-preview"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.DataMigration/services"
          ]
        },
        "etag": {
          "type": "string",
          "description": "HTTP strong entity tag value. Ignored if submitted"
        },
        "kind": {
          "type": "string",
          "description": "The resource kind. Only 'vm' (the default) is supported."
        },
        "location": {
          "type": "string",
          "description": "Resource location."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/DataMigrationServiceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Custom service properties"
        },
        "sku": {
          "oneOf": [
            {
              "$ref": "#/definitions/ServiceSku"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Service SKU"
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/services_projects_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.DataMigration/services"
    }
  },
  "definitions": {
    "BlobShare": {
      "type": "object",
      "properties": {
        "sasUri": {
          "type": "string",
          "description": "SAS URI of Azure Storage Account Container."
        }
      },
      "required": [
        "sasUri"
      ]
    },
    "ConnectionInfo": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "password": {
              "type": "string",
              "description": "Password credential."
            },
            "userName": {
              "type": "string",
              "description": "User name"
            },
            "type": {
              "type": "string",
              "enum": [
                "SqlConnectionInfo"
              ]
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        },
        {
          "oneOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/SqlConnectionInfo"
                },
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "const": "SqlConnectionInfo"
                    }
                  },
                  "required": [
                    "type"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "ConnectToSourceSqlServerTaskInput": {
      "type": "object",
      "properties": {
        "checkPermissionsGroup": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Default",
                "MigrationFromSqlServerToAzureDB"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Permission group for validations"
        },
        "CollectAgentJobs": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Flag for whether to collect agent jobs from source server."
        },
        "CollectLogins": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Flag for whether to collect logins from source server."
        },
        "sourceConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Connection information for Source SQL Server"
        }
      },
      "required": [
        "sourceConnectionInfo"
      ]
    },
    "ConnectToSourceSqlServerTaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectToSourceSqlServerTaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "ConnectToSource.SqlServer"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "ConnectToTargetSqlDbTaskInput": {
      "type": "object",
      "properties": {
        "targetConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Connection information for target SQL DB"
        }
      },
      "required": [
        "targetConnectionInfo"
      ]
    },
    "ConnectToTargetSqlDbTaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectToTargetSqlDbTaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "ConnectToTarget.SqlDb"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "ConnectToTargetSqlMITaskInput": {
      "type": "object",
      "properties": {
        "targetConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Connection information for target SQL Server"
        }
      },
      "required": [
        "targetConnectionInfo"
      ]
    },
    "ConnectToTargetSqlMITaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectToTargetSqlMITaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "ConnectToTarget.AzureSqlDbMI"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "DatabaseInfo": {
      "type": "object",
      "properties": {
        "sourceDatabaseName": {
          "type": "string",
          "description": "Name of the database"
        }
      },
      "required": [
        "sourceDatabaseName"
      ]
    },
    "DataMigrationServiceProperties": {
      "type": "object",
      "properties": {
        "publicKey": {
          "type": "string",
          "description": "The public key of the service, used to encrypt secrets sent to the service"
        },
        "virtualSubnetId": {
          "type": "string",
          "description": "The ID of the Microsoft.Network/virtualNetworks/subnets resource to which the service should be joined"
        }
      },
      "required": [
        "virtualSubnetId"
      ]
    },
    "FileShare": {
      "type": "object",
      "properties": {
        "password": {
          "type": "string",
          "description": "Password credential used to connect to the share location."
        },
        "path": {
          "type": "string",
          "description": "The folder path for this share."
        },
        "userName": {
          "type": "string",
          "description": "User name credential to connect to the share location"
        }
      },
      "required": [
        "path"
      ]
    },
    "GetUserTablesSqlTaskInput": {
      "type": "object",
      "properties": {
        "connectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Connection information for SQL Server"
        },
        "selectedDatabases": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of database names to collect tables for"
        }
      },
      "required": [
        "connectionInfo",
        "selectedDatabases"
      ]
    },
    "GetUserTablesSqlTaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/GetUserTablesSqlTaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "GetUserTables.Sql"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "MigrateSqlServerSqlDbDatabaseInput": {
      "type": "object",
      "properties": {
        "makeSourceDbReadOnly": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Whether to set database read only before migration"
        },
        "name": {
          "type": "string",
          "description": "Name of the database"
        },
        "tableMap": {
          "oneOf": [
            {
              "$ref": "#/definitions/MigrateSqlServerSqlDbDatabaseInputTableMap"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Mapping of source to target tables"
        },
        "targetDatabaseName": {
          "type": "string",
          "description": "Name of target database. Note: Target database will be truncated before starting migration."
        }
      }
    },
    "MigrateSqlServerSqlDbDatabaseInputTableMap": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string"
      }
    },
    "MigrateSqlServerSqlDbTaskInput": {
      "type": "object",
      "properties": {
        "selectedDatabases": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/MigrateSqlServerSqlDbDatabaseInput"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Databases to migrate"
        },
        "sourceConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to source"
        },
        "targetConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to target"
        },
        "validationOptions": {
          "oneOf": [
            {
              "$ref": "#/definitions/MigrationValidationOptions"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Options for enabling various post migration validations. Available options, \n 1.) Data Integrity Check: Performs a checksum based comparison on source and target tables after the migration to ensure the correctness of the data. \n 2.) Schema Validation: Performs a thorough schema comparison between the source and target tables and provides a list of differences between the source and target database, 3.) Query Analysis: Executes a set of queries picked up automatically either from the Query Plan Cache or Query Store and execute them and compares the execution time between the source and target database."
        }
      },
      "required": [
        "selectedDatabases",
        "sourceConnectionInfo",
        "targetConnectionInfo"
      ]
    },
    "MigrateSqlServerSqlDbTaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/MigrateSqlServerSqlDbTaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Migrate.SqlServer.SqlDb"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "MigrateSqlServerSqlMIDatabaseInput": {
      "type": "object",
      "properties": {
        "backupFileShare": {
          "oneOf": [
            {
              "$ref": "#/definitions/FileShare"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Backup file share information for backing up this database."
        },
        "name": {
          "type": "string",
          "description": "Name of the database"
        },
        "restoreDatabaseName": {
          "type": "string",
          "description": "Name of the database at destination"
        }
      },
      "required": [
        "name",
        "restoreDatabaseName"
      ]
    },
    "MigrateSqlServerSqlMITaskInput": {
      "type": "object",
      "properties": {
        "backupBlobShare": {
          "oneOf": [
            {
              "$ref": "#/definitions/BlobShare"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SAS URI of Azure Storage Account Container to be used for storing backup files."
        },
        "backupFileShare": {
          "oneOf": [
            {
              "$ref": "#/definitions/FileShare"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Backup file share information for all selected databases."
        },
        "selectedAgentJobs": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Agent Jobs to migrate."
        },
        "selectedDatabases": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/MigrateSqlServerSqlMIDatabaseInput"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Databases to migrate"
        },
        "selectedLogins": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Logins to migrate."
        },
        "sourceConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to source"
        },
        "targetConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to target"
        }
      },
      "required": [
        "backupBlobShare",
        "selectedDatabases",
        "sourceConnectionInfo",
        "targetConnectionInfo"
      ]
    },
    "MigrateSqlServerSqlMITaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/MigrateSqlServerSqlMITaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Migrate.SqlServer.AzureSqlDbMI"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "MigrationValidationOptions": {
      "type": "object",
      "properties": {
        "enableDataIntegrityValidation": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Allows to perform a checksum based data integrity validation between source and target for the selected database / tables ."
        },
        "enableQueryAnalysisValidation": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Allows to perform a quick and intelligent query analysis by retrieving queries from the source database and executes them in the target. The result will have execution statistics for executions in source and target databases for the extracted queries."
        },
        "enableSchemaValidation": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Allows to compare the schema information between source and target."
        }
      }
    },
    "ProjectProperties": {
      "type": "object",
      "properties": {
        "databasesInfo": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/DatabaseInfo"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of DatabaseInfo"
        },
        "sourceConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to source"
        },
        "sourcePlatform": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "SQL",
                "Unknown"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Source platform for the project"
        },
        "targetConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to target"
        },
        "targetPlatform": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "SQLDB",
                "SQLMI",
                "Unknown"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Target platform for the project"
        }
      },
      "required": [
        "sourcePlatform",
        "targetPlatform"
      ]
    },
    "ProjectTaskProperties": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "taskType": {
              "type": "string",
              "enum": [
                "ConnectToSource.SqlServer",
                "ConnectToTarget.AzureSqlDbMI",
                "ConnectToTarget.SqlDb",
                "GetUserTables.Sql",
                "Migrate.SqlServer.AzureSqlDbMI",
                "Migrate.SqlServer.SqlDb",
                "ValidateMigrationInput.SqlServer.AzureSqlDbMI"
              ]
            }
          },
          "required": [
            "taskType"
          ],
          "additionalProperties": false
        },
        {
          "oneOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/ConnectToSourceSqlServerTaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "ConnectToSource.SqlServer"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/ConnectToTargetSqlMITaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "ConnectToTarget.AzureSqlDbMI"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/ConnectToTargetSqlDbTaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "ConnectToTarget.SqlDb"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/GetUserTablesSqlTaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "GetUserTables.Sql"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/MigrateSqlServerSqlMITaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "Migrate.SqlServer.AzureSqlDbMI"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/MigrateSqlServerSqlDbTaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "Migrate.SqlServer.SqlDb"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/ValidateMigrationInputSqlServerSqlMITaskProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "taskType": {
                      "const": "ValidateMigrationInput.SqlServer.AzureSqlDbMI"
                    }
                  },
                  "required": [
                    "taskType"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "ServiceSku": {
      "type": "object",
      "properties": {
        "capacity": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The capacity of the SKU, if it supports scaling"
        },
        "family": {
          "type": "string",
          "description": "The SKU family, used when the service has multiple performance classes within a tier, such as 'A', 'D', etc. for virtual machines"
        },
        "name": {
          "type": "string",
          "description": "The unique name of the SKU, such as 'P3'"
        },
        "size": {
          "type": "string",
          "description": "The size of the SKU, used when the name alone does not denote a service size or when a SKU has multiple performance classes within a family, e.g. 'A1' for virtual machines"
        },
        "tier": {
          "type": "string",
          "description": "The tier of the SKU, such as 'Free', 'Basic', 'Standard', or 'Premium'"
        }
      }
    },
    "SqlConnectionInfo": {
      "type": "object",
      "properties": {
        "additionalSettings": {
          "type": "string",
          "description": "Additional connection settings"
        },
        "authentication": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "WindowsAuthentication",
                "SqlAuthentication",
                "ActiveDirectoryIntegrated",
                "ActiveDirectoryPassword"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Authentication type to use for connection"
        },
        "dataSource": {
          "type": "string",
          "description": "Data source in the format Protocol:MachineName\\SQLServerInstanceName,PortNumber"
        },
        "encryptConnection": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Whether to encrypt the connection"
        },
        "password": {
          "type": "string",
          "description": "Password credential."
        },
        "trustServerCertificate": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Whether to trust the server certificate"
        },
        "type": {
          "type": "string",
          "description": "Type of connection info"
        },
        "userName": {
          "type": "string",
          "description": "User name"
        }
      },
      "required": [
        "dataSource",
        "type"
      ]
    },
    "TrackedResourceTags": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string"
      }
    },
    "ValidateMigrationInputSqlServerSqlMITaskInput": {
      "type": "object",
      "properties": {
        "backupBlobShare": {
          "oneOf": [
            {
              "$ref": "#/definitions/BlobShare"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SAS URI of Azure Storage Account Container to be used for storing backup files."
        },
        "backupFileShare": {
          "oneOf": [
            {
              "$ref": "#/definitions/FileShare"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Backup file share information for all selected databases."
        },
        "selectedDatabases": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/MigrateSqlServerSqlMIDatabaseInput"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Databases to migrate"
        },
        "targetConnectionInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectionInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Information for connecting to target"
        }
      },
      "required": [
        "backupBlobShare",
        "selectedDatabases",
        "targetConnectionInfo"
      ]
    },
    "ValidateMigrationInputSqlServerSqlMITaskProperties": {
      "type": "object",
      "properties": {
        "input": {
          "oneOf": [
            {
              "$ref": "#/definitions/ValidateMigrationInputSqlServerSqlMITaskInput"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task input"
        },
        "taskType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "ValidateMigrationInput.SqlServer.AzureSqlDbMI"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Task type."
        }
      },
      "required": [
        "taskType"
      ]
    },
    "services_projects_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-03-31-preview"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "projects"
          ]
        },
        "location": {
          "type": "string",
          "description": "Resource location."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ProjectProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Project properties"
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.DataMigration/services/projects"
    },
    "services_projects_tasks_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-03-31-preview"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "tasks"
          ]
        },
        "etag": {
          "type": "string",
          "description": "HTTP strong entity tag value. This is ignored if submitted."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ProjectTaskProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Custom task properties"
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.DataMigration/services/projects/tasks"
    }
  }
}