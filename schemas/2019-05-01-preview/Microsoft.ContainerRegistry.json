{
  "id": "https://schema.management.azure.com/schemas/2019-05-01-preview/Microsoft.ContainerRegistry.json#",
  "title": "Microsoft.ContainerRegistry",
  "description": "Microsoft ContainerRegistry Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "registries_scopeMaps": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9-_]*$",
              "minLength": 5,
              "maxLength": 50
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.ContainerRegistry/registries/scopeMaps"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ScopeMapProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the scope map."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.ContainerRegistry/registries/scopeMaps"
    },
    "registries_tokens": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9-]*$",
              "minLength": 5,
              "maxLength": 50
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.ContainerRegistry/registries/tokens"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/TokenProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the token."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.ContainerRegistry/registries/tokens"
    }
  },
  "definitions": {
    "ActiveDirectoryObject": {
      "type": "object",
      "properties": {
        "objectId": {
          "type": "string",
          "description": "The user/group/application object ID for Active Directory Object that will be used for authenticating the token of a container registry."
        },
        "tenantId": {
          "type": "string",
          "description": "The tenant ID of user/group/application object Active Directory Object that will be used for authenticating the token of a container registry."
        }
      }
    },
    "ScopeMapProperties": {
      "type": "object",
      "properties": {
        "actions": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The list of scoped permissions for registry artifacts.\r\nE.g. repositories/repository-name/content/read,\r\nrepositories/repository-name/metadata/write"
        },
        "description": {
          "type": "string",
          "description": "The user friendly description of the scope map."
        }
      },
      "required": [
        "actions"
      ]
    },
    "TokenCertificate": {
      "type": "object",
      "properties": {
        "encodedPemCertificate": {
          "type": "string",
          "description": "Base 64 encoded string of the public certificate1 in PEM format that will be used for authenticating the token."
        },
        "expiry": {
          "type": "string",
          "description": "The expiry datetime of the certificate."
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "certificate1",
                "certificate2"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "thumbprint": {
          "type": "string",
          "description": "The thumbprint of the certificate."
        }
      }
    },
    "TokenCredentialsProperties": {
      "type": "object",
      "properties": {
        "activeDirectoryObject": {
          "oneOf": [
            {
              "$ref": "#/definitions/ActiveDirectoryObject"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Active Directory Object that will be used for authenticating the token of a container registry."
        },
        "certificates": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TokenCertificate"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "passwords": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TokenPassword"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      }
    },
    "TokenPassword": {
      "type": "object",
      "properties": {
        "creationTime": {
          "type": "string",
          "description": "The creation datetime of the password."
        },
        "expiry": {
          "type": "string",
          "description": "The expiry datetime of the password."
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "password1",
                "password2"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The password name \"password1\" or \"password2\""
        }
      }
    },
    "TokenProperties": {
      "type": "object",
      "properties": {
        "credentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/TokenCredentialsProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The credentials that can be used for authenticating the token."
        },
        "scopeMapId": {
          "type": "string",
          "description": "The resource ID of the scope map to which the token will be associated with."
        },
        "status": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "enabled",
                "disabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The status of the token example enabled or disabled."
        }
      }
    }
  }
}