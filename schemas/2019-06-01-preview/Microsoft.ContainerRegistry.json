{
  "id": "https://schema.management.azure.com/schemas/2019-06-01-preview/Microsoft.ContainerRegistry.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.ContainerRegistry",
  "description": "Microsoft ContainerRegistry Resource Types",
  "resourceDefinitions": {
    "registries_agentPools": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-06-01-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The location of the resource. This cannot be changed after the resource is created."
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9-]*$",
              "minLength": 3,
              "maxLength": 20
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The name of the agent pool."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentPoolProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of agent pool."
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The tags of the resource."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.ContainerRegistry/registries/agentPools"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.ContainerRegistry/registries/agentPools"
    },
    "registries_taskRuns": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-06-01-preview"
          ]
        },
        "identity": {
          "oneOf": [
            {
              "$ref": "#/definitions/IdentityProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Managed identity for the resource."
        },
        "location": {
          "type": "string",
          "description": "The location of the resource"
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9-]*$",
              "minLength": 5,
              "maxLength": 50
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The name of the task run."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/TaskRunProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of task run."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.ContainerRegistry/registries/taskRuns"
          ]
        }
      },
      "required": [
        "apiVersion",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.ContainerRegistry/registries/taskRuns"
    },
    "registries_tasks": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-06-01-preview"
          ]
        },
        "identity": {
          "oneOf": [
            {
              "$ref": "#/definitions/IdentityProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Managed identity for the resource."
        },
        "location": {
          "type": "string",
          "description": "The location of the resource. This cannot be changed after the resource is created."
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9-_]*$",
              "minLength": 5,
              "maxLength": 50
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The name of the container registry task."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/TaskProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of a task."
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The tags of the resource."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.ContainerRegistry/registries/tasks"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.ContainerRegistry/registries/tasks"
    }
  },
  "definitions": {
    "AgentPoolProperties": {
      "type": "object",
      "properties": {
        "count": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The count of agent machine"
        },
        "os": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Windows",
                "Linux"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The OS of agent machine."
        },
        "tier": {
          "type": "string",
          "description": "The Tier of agent machine"
        },
        "virtualNetworkSubnetResourceId": {
          "type": "string",
          "description": "The Virtual Network Subnet Resource Id of the agent machine"
        }
      },
      "description": "The properties of agent pool."
    },
    "AgentProperties": {
      "type": "object",
      "properties": {
        "cpu": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The CPU configuration in terms of number of cores required for the run."
        }
      },
      "description": "The properties that determine the run agent configuration."
    },
    "Argument": {
      "type": "object",
      "properties": {
        "isSecret": {
          "oneOf": [
            {
              "type": "boolean",
              "default": false
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Flag to indicate whether the argument represents a secret and want to be removed from build logs."
        },
        "name": {
          "type": "string",
          "description": "The name of the argument."
        },
        "value": {
          "type": "string",
          "description": "The value of the argument."
        }
      },
      "required": [
        "name",
        "value"
      ],
      "description": "The properties of a run argument."
    },
    "AuthInfo": {
      "type": "object",
      "properties": {
        "expiresIn": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Time in seconds that the token remains valid"
        },
        "refreshToken": {
          "type": "string",
          "description": "The refresh token used to refresh the access token."
        },
        "scope": {
          "type": "string",
          "description": "The scope of the access token."
        },
        "token": {
          "type": "string",
          "description": "The access token used to access the source control provider."
        },
        "tokenType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "PAT",
                "OAuth"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The type of Auth token."
        }
      },
      "required": [
        "token",
        "tokenType"
      ],
      "description": "The authorization properties for accessing the source code repository."
    },
    "BaseImageTrigger": {
      "type": "object",
      "properties": {
        "baseImageTriggerType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "All",
                "Runtime"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The type of the auto trigger for base image dependency updates."
        },
        "name": {
          "type": "string",
          "description": "The name of the trigger."
        },
        "status": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Disabled",
                "Enabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The current status of trigger."
        },
        "updateTriggerEndpoint": {
          "type": "string",
          "description": "The endpoint URL for receiving update triggers."
        },
        "updateTriggerPayloadType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Default",
                "Token"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of Payload body for Base image update triggers."
        }
      },
      "required": [
        "baseImageTriggerType",
        "name"
      ],
      "description": "The trigger based on base image dependency."
    },
    "Credentials": {
      "type": "object",
      "properties": {
        "customRegistries": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/CustomRegistryCredentials"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Describes the credential parameters for accessing other custom registries. The key\r\nfor the dictionary item will be the registry login server (myregistry.azurecr.io) and\r\nthe value of the item will be the registry credentials for accessing the registry."
        },
        "sourceRegistry": {
          "oneOf": [
            {
              "$ref": "#/definitions/SourceRegistryCredentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Describes the credential parameters for accessing the source registry."
        }
      },
      "description": "The parameters that describes a set of credentials that will be used when a run is invoked."
    },
    "CustomRegistryCredentials": {
      "type": "object",
      "properties": {
        "identity": {
          "type": "string",
          "description": "Indicates the managed identity assigned to the custom credential. If a user-assigned identity\r\nthis value is the Client ID. If a system-assigned identity, the value will be `system`. In\r\nthe case of a system-assigned identity, the Client ID will be determined by the runner. This\r\nidentity may be used to authenticate to key vault to retrieve credentials or it may be the only \r\nsource of authentication used for accessing the registry."
        },
        "password": {
          "oneOf": [
            {
              "$ref": "#/definitions/SecretObject"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Describes the properties of a secret object value."
        },
        "userName": {
          "oneOf": [
            {
              "$ref": "#/definitions/SecretObject"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Describes the properties of a secret object value."
        }
      },
      "description": "Describes the credentials that will be used to access a custom registry during a run."
    },
    "DockerBuildRequest": {
      "type": "object",
      "properties": {
        "agentConfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties that determine the run agent configuration."
        },
        "arguments": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Argument"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of override arguments to be used when executing the run."
        },
        "credentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/Credentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The parameters that describes a set of credentials that will be used when a run is invoked."
        },
        "dockerFilePath": {
          "type": "string",
          "description": "The Docker file path relative to the source location."
        },
        "imageNames": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The fully qualified image names including the repository and tag."
        },
        "isPushEnabled": {
          "oneOf": [
            {
              "type": "boolean",
              "default": true
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The value of this property indicates whether the image built should be pushed to the registry or not."
        },
        "noCache": {
          "oneOf": [
            {
              "type": "boolean",
              "default": false
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The value of this property indicates whether the image cache is enabled or not."
        },
        "platform": {
          "oneOf": [
            {
              "$ref": "#/definitions/PlatformProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The platform properties against which the run has to happen."
        },
        "sourceLocation": {
          "type": "string",
          "description": "The URL(absolute or relative) of the source context. It can be an URL to a tar or git repository.\r\nIf it is relative URL, the relative path should be obtained from calling listBuildSourceUploadUrl API."
        },
        "target": {
          "type": "string",
          "description": "The name of the target build stage for the docker build."
        },
        "timeout": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 300,
              "maximum": 28800,
              "default": "3600"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Run timeout in seconds."
        },
        "type": {
          "type": "string",
          "enum": [
            "DockerBuildRequest"
          ]
        }
      },
      "required": [
        "dockerFilePath",
        "platform",
        "type"
      ],
      "description": "The parameters for a docker quick build."
    },
    "DockerBuildStep": {
      "type": "object",
      "properties": {
        "arguments": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Argument"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of override arguments to be used when executing this build step."
        },
        "dockerFilePath": {
          "type": "string",
          "description": "The Docker file path relative to the source context."
        },
        "imageNames": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The fully qualified image names including the repository and tag."
        },
        "isPushEnabled": {
          "oneOf": [
            {
              "type": "boolean",
              "default": true
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The value of this property indicates whether the image built should be pushed to the registry or not."
        },
        "noCache": {
          "oneOf": [
            {
              "type": "boolean",
              "default": false
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The value of this property indicates whether the image cache is enabled or not."
        },
        "target": {
          "type": "string",
          "description": "The name of the target build stage for the docker build."
        },
        "type": {
          "type": "string",
          "enum": [
            "Docker"
          ]
        }
      },
      "required": [
        "dockerFilePath",
        "type"
      ],
      "description": "The Docker build step."
    },
    "EncodedTaskRunRequest": {
      "type": "object",
      "properties": {
        "agentConfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties that determine the run agent configuration."
        },
        "credentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/Credentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The parameters that describes a set of credentials that will be used when a run is invoked."
        },
        "encodedTaskContent": {
          "type": "string",
          "description": "Base64 encoded value of the template/definition file content."
        },
        "encodedValuesContent": {
          "type": "string",
          "description": "Base64 encoded value of the parameters/values file content."
        },
        "platform": {
          "oneOf": [
            {
              "$ref": "#/definitions/PlatformProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The platform properties against which the run has to happen."
        },
        "sourceLocation": {
          "type": "string",
          "description": "The URL(absolute or relative) of the source context. It can be an URL to a tar or git repository.\r\nIf it is relative URL, the relative path should be obtained from calling listBuildSourceUploadUrl API."
        },
        "timeout": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 300,
              "maximum": 28800,
              "default": "3600"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Run timeout in seconds."
        },
        "type": {
          "type": "string",
          "enum": [
            "EncodedTaskRunRequest"
          ]
        },
        "values": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SetValue"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of overridable values that can be passed when running a task."
        }
      },
      "required": [
        "encodedTaskContent",
        "platform",
        "type"
      ],
      "description": "The parameters for a quick task run request."
    },
    "EncodedTaskStep": {
      "type": "object",
      "properties": {
        "encodedTaskContent": {
          "type": "string",
          "description": "Base64 encoded value of the template/definition file content."
        },
        "encodedValuesContent": {
          "type": "string",
          "description": "Base64 encoded value of the parameters/values file content."
        },
        "type": {
          "type": "string",
          "enum": [
            "EncodedTask"
          ]
        },
        "values": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SetValue"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of overridable values that can be passed when running a task."
        }
      },
      "required": [
        "encodedTaskContent",
        "type"
      ],
      "description": "The properties of a encoded task step."
    },
    "FileTaskRunRequest": {
      "type": "object",
      "properties": {
        "agentConfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties that determine the run agent configuration."
        },
        "credentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/Credentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The parameters that describes a set of credentials that will be used when a run is invoked."
        },
        "platform": {
          "oneOf": [
            {
              "$ref": "#/definitions/PlatformProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The platform properties against which the run has to happen."
        },
        "sourceLocation": {
          "type": "string",
          "description": "The URL(absolute or relative) of the source context. It can be an URL to a tar or git repository.\r\nIf it is relative URL, the relative path should be obtained from calling listBuildSourceUploadUrl API."
        },
        "taskFilePath": {
          "type": "string",
          "description": "The template/definition file path relative to the source."
        },
        "timeout": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 300,
              "maximum": 28800,
              "default": "3600"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Run timeout in seconds."
        },
        "type": {
          "type": "string",
          "enum": [
            "FileTaskRunRequest"
          ]
        },
        "values": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SetValue"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of overridable values that can be passed when running a task."
        },
        "valuesFilePath": {
          "type": "string",
          "description": "The values/parameters file path relative to the source."
        }
      },
      "required": [
        "platform",
        "taskFilePath",
        "type"
      ],
      "description": "The request parameters for a scheduling run against a task file."
    },
    "FileTaskStep": {
      "type": "object",
      "properties": {
        "taskFilePath": {
          "type": "string",
          "description": "The task template/definition file path relative to the source context."
        },
        "type": {
          "type": "string",
          "enum": [
            "FileTask"
          ]
        },
        "values": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SetValue"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of overridable values that can be passed when running a task."
        },
        "valuesFilePath": {
          "type": "string",
          "description": "The task values/parameters file path relative to the source context."
        }
      },
      "required": [
        "taskFilePath",
        "type"
      ],
      "description": "The properties of a task step."
    },
    "IdentityProperties": {
      "type": "object",
      "properties": {
        "principalId": {
          "type": "string",
          "description": "The principal ID of resource identity."
        },
        "tenantId": {
          "type": "string",
          "description": "The tenant ID of resource."
        },
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "SystemAssigned",
                "UserAssigned",
                "SystemAssigned, UserAssigned",
                "None"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The identity type."
        },
        "userAssignedIdentities": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/UserIdentityProperties"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The list of user identities associated with the resource. The user identity \r\ndictionary key references will be ARM resource ids in the form: \r\n'/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/\r\n    providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'."
        }
      },
      "description": "Managed identity for the resource."
    },
    "OverrideTaskStepProperties": {
      "type": "object",
      "properties": {
        "arguments": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Argument"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Gets or sets the collection of override arguments to be used when\r\nexecuting a build step."
        },
        "contextPath": {
          "type": "string",
          "description": "The source context against which run has to be queued."
        },
        "file": {
          "type": "string",
          "description": "The file against which run has to be queued."
        },
        "target": {
          "type": "string",
          "description": "The name of the target build stage for the docker build."
        },
        "updateTriggerToken": {
          "type": "string",
          "description": "Base64 encoded update trigger token that will be attached with the base image trigger webhook."
        },
        "values": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SetValue"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of overridable values that can be passed when running a Task."
        }
      }
    },
    "PlatformProperties": {
      "type": "object",
      "properties": {
        "architecture": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "amd64",
                "x86",
                "386",
                "arm",
                "arm64"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The OS architecture."
        },
        "os": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Windows",
                "Linux"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The operating system type required for the run."
        },
        "variant": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "v6",
                "v7",
                "v8"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Variant of the CPU."
        }
      },
      "required": [
        "os"
      ],
      "description": "The platform properties against which the run has to happen."
    },
    "RunRequest": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/DockerBuildRequest"
        },
        {
          "$ref": "#/definitions/FileTaskRunRequest"
        },
        {
          "$ref": "#/definitions/TaskRunRequest"
        },
        {
          "$ref": "#/definitions/EncodedTaskRunRequest"
        }
      ],
      "properties": {
        "agentPoolName": {
          "type": "string",
          "description": "The dedicated agent pool for the run."
        },
        "isArchiveEnabled": {
          "oneOf": [
            {
              "type": "boolean",
              "default": false
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The value that indicates whether archiving is enabled for the run or not."
        },
        "logTemplate": {
          "type": "string",
          "description": "The template that describes the repository and tag information for run log artifact."
        }
      },
      "description": "The request parameters for scheduling a run."
    },
    "SecretObject": {
      "type": "object",
      "properties": {
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Opaque",
                "Vaultsecret"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The type of the secret object which determines how the value of the secret object has to be\r\ninterpreted."
        },
        "value": {
          "type": "string",
          "description": "The value of the secret. The format of this value will be determined\r\nbased on the type of the secret object. If the type is Opaque, the value will be\r\nused as is without any modification."
        }
      },
      "description": "Describes the properties of a secret object value."
    },
    "SetValue": {
      "type": "object",
      "properties": {
        "isSecret": {
          "oneOf": [
            {
              "type": "boolean",
              "default": false
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Flag to indicate whether the value represents a secret or not."
        },
        "name": {
          "type": "string",
          "description": "The name of the overridable value."
        },
        "value": {
          "type": "string",
          "description": "The overridable value."
        }
      },
      "required": [
        "name",
        "value"
      ],
      "description": "The properties of a overridable value that can be passed to a task template."
    },
    "SourceProperties": {
      "type": "object",
      "properties": {
        "branch": {
          "type": "string",
          "description": "The branch name of the source code."
        },
        "repositoryUrl": {
          "type": "string",
          "description": "The full URL to the source code repository"
        },
        "sourceControlAuthProperties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AuthInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The authorization properties for accessing the source code repository."
        },
        "sourceControlType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Github",
                "VisualStudioTeamService"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The type of source control service."
        }
      },
      "required": [
        "repositoryUrl",
        "sourceControlType"
      ],
      "description": "The properties of the source code repository."
    },
    "SourceRegistryCredentials": {
      "type": "object",
      "properties": {
        "loginMode": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "Default"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The authentication mode which determines the source registry login scope. The credentials for the source registry\r\nwill be generated using the given scope. These credentials will be used to login to\r\nthe source registry during the run."
        }
      },
      "description": "Describes the credential parameters for accessing the source registry."
    },
    "SourceTrigger": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the trigger."
        },
        "sourceRepository": {
          "oneOf": [
            {
              "$ref": "#/definitions/SourceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the source code repository."
        },
        "sourceTriggerEvents": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "commit",
                  "pullrequest"
                ]
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The source event corresponding to the trigger."
        },
        "status": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Disabled",
                "Enabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The current status of trigger."
        }
      },
      "required": [
        "name",
        "sourceRepository",
        "sourceTriggerEvents"
      ],
      "description": "The properties of a source based trigger."
    },
    "TaskProperties": {
      "type": "object",
      "properties": {
        "agentConfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties that determine the run agent configuration."
        },
        "agentPoolName": {
          "type": "string",
          "description": "The dedicated agent pool for the task."
        },
        "credentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/Credentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The parameters that describes a set of credentials that will be used when a run is invoked."
        },
        "isSystemTask": {
          "oneOf": [
            {
              "type": "boolean",
              "default": false
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The value of this property indicates whether the task resource is system task or not."
        },
        "logTemplate": {
          "type": "string",
          "description": "The template that describes the repository and tag information for run log artifact."
        },
        "platform": {
          "oneOf": [
            {
              "$ref": "#/definitions/PlatformProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The platform properties against which the run has to happen."
        },
        "status": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Disabled",
                "Enabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The current status of task."
        },
        "step": {
          "oneOf": [
            {
              "$ref": "#/definitions/TaskStepProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Base properties for any task step."
        },
        "timeout": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 300,
              "maximum": 28800,
              "default": "3600"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Run timeout in seconds."
        },
        "trigger": {
          "oneOf": [
            {
              "$ref": "#/definitions/TriggerProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of a trigger."
        }
      },
      "description": "The properties of a task."
    },
    "TaskRunProperties": {
      "type": "object",
      "properties": {
        "forceUpdateTag": {
          "type": "string",
          "description": "How the run should be forced to rerun even if the run request configuration has not changed"
        },
        "runRequest": {
          "oneOf": [
            {
              "$ref": "#/definitions/RunRequest"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The request parameters for scheduling a run."
        }
      },
      "description": "The properties of task run."
    },
    "TaskRunRequest": {
      "type": "object",
      "properties": {
        "overrideTaskStepProperties": {
          "oneOf": [
            {
              "$ref": "#/definitions/OverrideTaskStepProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "taskId": {
          "type": "string",
          "description": "The resource ID of task against which run has to be queued."
        },
        "type": {
          "type": "string",
          "enum": [
            "TaskRunRequest"
          ]
        }
      },
      "required": [
        "taskId",
        "type"
      ],
      "description": "The parameters for a task run request."
    },
    "TaskStepProperties": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/DockerBuildStep"
        },
        {
          "$ref": "#/definitions/FileTaskStep"
        },
        {
          "$ref": "#/definitions/EncodedTaskStep"
        }
      ],
      "properties": {
        "contextAccessToken": {
          "type": "string",
          "description": "The token (git PAT or SAS token of storage account blob) associated with the context for a step."
        },
        "contextPath": {
          "type": "string",
          "description": "The URL(absolute or relative) of the source context for the task step."
        }
      },
      "description": "Base properties for any task step."
    },
    "TimerTrigger": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the trigger."
        },
        "schedule": {
          "type": "string",
          "description": "The CRON expression for the task schedule"
        },
        "status": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Disabled",
                "Enabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The current status of trigger."
        }
      },
      "required": [
        "name",
        "schedule"
      ],
      "description": "The properties of a timer trigger."
    },
    "TriggerProperties": {
      "type": "object",
      "properties": {
        "baseImageTrigger": {
          "oneOf": [
            {
              "$ref": "#/definitions/BaseImageTrigger"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The trigger based on base image dependency."
        },
        "sourceTriggers": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SourceTrigger"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of triggers based on source code repository."
        },
        "timerTriggers": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TimerTrigger"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The collection of timer triggers."
        }
      },
      "description": "The properties of a trigger."
    },
    "UserIdentityProperties": {
      "type": "object",
      "properties": {
        "clientId": {
          "type": "string",
          "description": "The client id of user assigned identity."
        },
        "principalId": {
          "type": "string",
          "description": "The principal id of user assigned identity."
        }
      }
    }
  }
}