{
  "id": "https://schema.management.azure.com/schemas/2019-09-16-preview/Microsoft.WindowsESU.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.WindowsESU",
  "description": "Manage Multiple Activation Keys (MAK) that enable Windows Extended Security Updates (ESU).",
  "resourceDefinitions": {
    "multipleActivationKeys": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the MAK."
        },
        "apiVersion": {
          "type": "string",
          "enum": ["2019-09-16-preview"]
        },
        "type": {
          "type": "string",
          "enum": ["Microsoft.WindowsESU/multipleActivationKeys"]
        },
        "location": {
          "type": "string",
          "description": "Location of the azure resource."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/MAKProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "MAK properties."
        }
      },
      "required": ["apiVersion", "location", "name", "properties", "type"],
      "description": "Microsoft.WindowsESU/multipleActivationKeys"
    }
  },
  "definitions": {
    "MAKProperties": {
      "type": "object",
      "properties": {
        "id": {
          "description": "Resource Id.",
          "type": "string",
          "readOnly": true
        },
        "name": {
          "description": "Name of the MAK key.",
          "type": "string",
          "readOnly": true
        },
        "type": {
          "description": "Resource type.",
          "type": "string",
          "readOnly": true
        },
        "location": {
          "description": "Resource location.",
          "type": "string",
          "x-ms-mutability": ["create", "read"]
        },
        "tags": {
          "description": "Resource tags.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "properties": {
          "description": "MAK key specific properties.",
          "type": "object",
          "x-ms-client-flatten": true,
          "properties": {
            "multipleActivationKey": {
              "description": "MAK 5x5 key.",
              "type": "string",
              "readOnly": true
            },
            "expirationDate": {
              "description": "End of support of security updates activated by the MAK key.",
              "format": "date-time",
              "type": "string",
              "readOnly": true
            },
            "osType": {
              "description": "Type of OS for which the key is requested.",
              "type": "string",
              "enum": ["Windows7", "WindowsServer2008", "WindowsServer2008R2"],
              "x-ms-enum": {
                "name": "OsType",
                "modelAsString": true
              },
              "x-ms-mutability": ["create", "read"]
            },
            "supportType": {
              "description": "Type of support",
              "type": "string",
              "enum": ["SupplementalServicing", "PremiumAssurance"],
              "default": "SupplementalServicing",
              "x-ms-enum": {
                "name": "SupportType",
                "modelAsString": true
              },
              "x-ms-mutability": ["create", "read"]
            },
            "installedServerNumber": {
              "description": "Number of activations/servers using the MAK key.",
              "type": "integer",
              "minimum": 1,
              "maximum": 5000,
              "x-ms-mutability": ["create", "read"]
            },
            "agreementNumber": {
              "description": "Agreement number under which the key is requested.",
              "type": "string",
              "x-ms-mutability": ["create", "read"]
            },
            "isEligible": {
              "description": "<code> true </code> if user has eligible on-premises Windows physical or virtual machines, and that the requested key will only be used in their organization; <code> false </code> otherwise.",
              "type": "boolean",
              "x-ms-mutability": ["create", "read"]
            },
            "provisioningState": {
              "type": "string",
              "enum": [
                "Succeeded",
                "Failed",
                "Canceled",
                "Accepted",
                "Provisioning"
              ],
              "x-ms-enum": {
                "name": "ProvisioningState",
                "modelAsString": true
              },
              "readOnly": true
            }
          }
        }
      },
      "description": "MAK properties"
    }
  }
}
