{
  "id": "https://schema.management.azure.com/schemas/2019-10-01-preview/Microsoft.Resources.json#",
  "title": "Microsoft.Resources",
  "description": "Microsoft Resources Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "deploymentScripts": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "identity": {
              "oneOf": [
                {
                  "$ref": "#/definitions/ManagedServiceIdentity"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Managed identity to be used for this deployment script. Currently, only user-assigned MSI is supported."
            },
            "kind": {
              "oneOf": [
                {
                  "type": "string",
                  "enum": [
                    "AzureCLI"
                  ]
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Type of the script."
            },
            "location": {
              "type": "string",
              "description": "The location of the ACI and the storage account for the deployment script."
            },
            "properties": {
              "oneOf": [
                {
                  "$ref": "#/definitions/AzureCliScriptProperties"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Properties of the Azure CLI script object."
            },
            "tags": {
              "oneOf": [
                {
                  "$ref": "#/definitions/DeploymentScriptTags"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Resource tags."
            }
          },
          "required": [
            "identity",
            "kind",
            "location",
            "properties"
          ]
        },
        {
          "type": "object",
          "properties": {
            "identity": {
              "oneOf": [
                {
                  "$ref": "#/definitions/ManagedServiceIdentity"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Managed identity to be used for this deployment script. Currently, only user-assigned MSI is supported."
            },
            "kind": {
              "oneOf": [
                {
                  "type": "string",
                  "enum": [
                    "AzurePowerShell"
                  ]
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Type of the script."
            },
            "location": {
              "type": "string",
              "description": "The location of the ACI and the storage account for the deployment script."
            },
            "properties": {
              "oneOf": [
                {
                  "$ref": "#/definitions/AzurePowerShellScriptProperties"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Properties of the Azure PowerShell script object."
            },
            "tags": {
              "oneOf": [
                {
                  "$ref": "#/definitions/DeploymentScriptTags"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Resource tags."
            }
          },
          "required": [
            "identity",
            "kind",
            "location",
            "properties"
          ]
        }
      ],
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01-preview"
          ]
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Resources/deploymentScripts"
          ]
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/deploymentScripts_logs_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "apiVersion",
        "type"
      ],
      "description": "Microsoft.Resources/deploymentScripts"
    }
  },
  "unknown_resourceDefinitions": {
    "deploymentScripts_logs": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^.*/default$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Resources/deploymentScripts/logs"
          ]
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type"
      ],
      "description": "Microsoft.Resources/deploymentScripts/logs"
    }
  },
  "definitions": {
    "AzureCliScript": {
      "type": "object",
      "properties": {
        "kind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AzureCLI"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of the script."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AzureCliScriptProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Properties of the Azure CLI script object."
        }
      },
      "required": [
        "kind",
        "properties"
      ]
    },
    "AzureCliScriptProperties": {
      "type": "object",
      "properties": {
        "arguments": {
          "type": "string",
          "description": "Command line arguments to pass to the script. Arguments are separated by spaces. ex: -Name blue* -Location 'West US 2'"
        },
        "azCliVersion": {
          "type": "string",
          "description": "Azure CLI module version to be used."
        },
        "cleanupPreference": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Always",
                "OnSuccess",
                "OnExpiration"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The clean up preference when the script execution gets in a terminal state. Default setting is 'Always'."
        },
        "containerSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/ContainerConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Container settings."
        },
        "environmentVariables": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/EnvironmentVariable"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The environment variables to pass over to the script."
        },
        "forceUpdateTag": {
          "type": "string",
          "description": "Gets or sets how the deployment script should be forced to execute even if the script resource has not changed. Can be current time stamp or a GUID."
        },
        "primaryScriptUri": {
          "type": "string",
          "description": "Uri for the script. This is the entry point for the external script."
        },
        "retentionInterval": {
          "type": "string",
          "description": "Interval for which the service retains the script resource after it reaches a terminal state. Resource will be deleted when this duration expires. Duration is based on ISO 8601 pattern (for example P1D means one day)."
        },
        "scriptContent": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 32000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Script body."
        },
        "storageAccountSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/StorageAccountConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Storage Account settings."
        },
        "supportingScriptUris": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Supporting files for the external script."
        },
        "timeout": {
          "type": "string",
          "description": "Maximum allowed script execution time specified in ISO 8601 format. Default value is P1D"
        }
      },
      "required": [
        "azCliVersion",
        "retentionInterval"
      ]
    },
    "AzurePowerShellScript": {
      "type": "object",
      "properties": {
        "kind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AzurePowerShell"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of the script."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AzurePowerShellScriptProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Properties of the Azure PowerShell script object."
        }
      },
      "required": [
        "kind",
        "properties"
      ]
    },
    "AzurePowerShellScriptProperties": {
      "type": "object",
      "properties": {
        "arguments": {
          "type": "string",
          "description": "Command line arguments to pass to the script. Arguments are separated by spaces. ex: -Name blue* -Location 'West US 2'"
        },
        "azPowerShellVersion": {
          "type": "string",
          "description": "Azure PowerShell module version to be used."
        },
        "cleanupPreference": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Always",
                "OnSuccess",
                "OnExpiration"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The clean up preference when the script execution gets in a terminal state. Default setting is 'Always'."
        },
        "containerSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/ContainerConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Container settings."
        },
        "environmentVariables": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/EnvironmentVariable"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The environment variables to pass over to the script."
        },
        "forceUpdateTag": {
          "type": "string",
          "description": "Gets or sets how the deployment script should be forced to execute even if the script resource has not changed. Can be current time stamp or a GUID."
        },
        "primaryScriptUri": {
          "type": "string",
          "description": "Uri for the script. This is the entry point for the external script."
        },
        "retentionInterval": {
          "type": "string",
          "description": "Interval for which the service retains the script resource after it reaches a terminal state. Resource will be deleted when this duration expires. Duration is based on ISO 8601 pattern (for example P1D means one day)."
        },
        "scriptContent": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 32000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Script body."
        },
        "storageAccountSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/StorageAccountConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Storage Account settings."
        },
        "supportingScriptUris": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Supporting files for the external script."
        },
        "timeout": {
          "type": "string",
          "description": "Maximum allowed script execution time specified in ISO 8601 format. Default value is P1D"
        }
      },
      "required": [
        "azPowerShellVersion",
        "retentionInterval"
      ]
    },
    "ContainerConfiguration": {
      "type": "object",
      "properties": {
        "containerGroupName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 63
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Container group name, if not specified then the name will get auto-generated. Not specifying a 'containerGroupName' indicates the system to generate a unique name which might end up flagging an Azure Policy as non-compliant. Use 'containerGroupName' when you have an Azure Policy that expects a specific naming convention or when you want to fully control the name. 'containerGroupName' property must be between 1 and 63 characters long, must contain only lowercase letters, numbers, and dashes and it cannot start or end with a dash and consecutive dashes are not allowed. To specify a 'containerGroupName', add the following object to properties: { \"containerSettings\": { \"containerGroupName\": \"contoso-container\" } }. If you do not want to specify a 'containerGroupName' then do not add 'containerSettings' property."
        }
      }
    },
    "DeploymentScriptTags": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string"
      }
    },
    "EnvironmentVariable": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the environment variable."
        },
        "secureValue": {
          "type": "string",
          "description": "The value of the secure environment variable."
        },
        "value": {
          "type": "string",
          "description": "The value of the environment variable."
        }
      },
      "required": [
        "name"
      ]
    },
    "ManagedServiceIdentity": {
      "type": "object",
      "properties": {
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "UserAssigned"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of the managed identity."
        },
        "userAssignedIdentities": {
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedServiceIdentityUserAssignedIdentities"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The list of user-assigned managed identities associated with the resource. Key is the Azure resource Id of the managed identity."
        }
      }
    },
    "ManagedServiceIdentityUserAssignedIdentities": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "$ref": "#/definitions/UserAssignedIdentity"
      }
    },
    "StorageAccountConfiguration": {
      "type": "object",
      "properties": {
        "storageAccountKey": {
          "type": "string",
          "description": "The storage account access key."
        },
        "storageAccountName": {
          "type": "string",
          "description": "The storage account name."
        }
      }
    },
    "UserAssignedIdentity": {
      "type": "object",
      "properties": {}
    },
    "deploymentScripts_logs_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^.*/default$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "logs"
          ]
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type"
      ],
      "description": "Microsoft.Resources/deploymentScripts/logs"
    }
  }
}