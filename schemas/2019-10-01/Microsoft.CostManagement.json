{
  "id": "https://schema.management.azure.com/schemas/2019-10-01/Microsoft.CostManagement.json#",
  "title": "Microsoft.CostManagement",
  "description": "Microsoft CostManagement Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "tenant_resourceDefinitions": {
    "exports": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CostManagement/exports"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the export."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CostManagement/exports"
    }
  },
  "managementGroup_resourceDefinitions": {
    "exports": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CostManagement/exports"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the export."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CostManagement/exports"
    }
  },
  "subscription_resourceDefinitions": {
    "exports": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CostManagement/exports"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the export."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CostManagement/exports"
    }
  },
  "resourceDefinitions": {
    "exports": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2019-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CostManagement/exports"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The properties of the export."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CostManagement/exports"
    }
  },
  "definitions": {
    "ExportDeliveryDestination": {
      "type": "object",
      "properties": {
        "container": {
          "type": "string",
          "description": "The name of the container where exports will be uploaded."
        },
        "resourceId": {
          "type": "string",
          "description": "The resource id of the storage account where exports will be delivered."
        },
        "rootFolderPath": {
          "type": "string",
          "description": "The name of the directory where exports will be uploaded."
        }
      },
      "required": [
        "container",
        "resourceId"
      ]
    },
    "ExportDeliveryInfo": {
      "type": "object",
      "properties": {
        "destination": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportDeliveryDestination"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has destination for the export being delivered."
        }
      },
      "required": [
        "destination"
      ]
    },
    "ExportProperties": {
      "type": "object",
      "properties": {
        "definition": {
          "oneOf": [
            {
              "$ref": "#/definitions/QueryDefinition"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has definition for the export."
        },
        "deliveryInfo": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportDeliveryInfo"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has delivery information for the export."
        },
        "format": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Csv"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The format of the export being delivered."
        },
        "schedule": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportSchedule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has schedule information for the export."
        }
      },
      "required": [
        "definition",
        "deliveryInfo"
      ]
    },
    "ExportRecurrencePeriod": {
      "type": "object",
      "properties": {
        "from": {
          "type": "string",
          "description": "The start date of recurrence."
        },
        "to": {
          "type": "string",
          "description": "The end date of recurrence."
        }
      },
      "required": [
        "from"
      ]
    },
    "ExportSchedule": {
      "type": "object",
      "properties": {
        "recurrence": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Daily",
                "Weekly",
                "Monthly",
                "Annually"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The schedule recurrence."
        },
        "recurrencePeriod": {
          "oneOf": [
            {
              "$ref": "#/definitions/ExportRecurrencePeriod"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has start and end date of the recurrence. The start date must be in future. If present, the end date must be greater than start date."
        },
        "status": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Active",
                "Inactive"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The status of the schedule. Whether active or not. If inactive, the export's scheduled execution is paused."
        }
      },
      "required": [
        "recurrence"
      ]
    },
    "QueryAggregation": {
      "type": "object",
      "properties": {
        "function": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Sum"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The name of the aggregation function to use."
        },
        "name": {
          "type": "string",
          "description": "The name of the column to aggregate."
        }
      },
      "required": [
        "function",
        "name"
      ]
    },
    "QueryComparisonExpression": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the column to use in comparison."
        },
        "operator": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "In"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The operator to use for comparison."
        },
        "values": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Array of values to use for comparison"
        }
      },
      "required": [
        "name",
        "operator",
        "values"
      ]
    },
    "QueryDataset": {
      "type": "object",
      "properties": {
        "aggregation": {
          "oneOf": [
            {
              "$ref": "#/definitions/QueryDatasetAggregation"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Dictionary of aggregation expression to use in the query. The key of each item in the dictionary is the alias for the aggregated column. Query can have up to 2 aggregation clauses."
        },
        "configuration": {
          "oneOf": [
            {
              "$ref": "#/definitions/QueryDatasetConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has configuration information for the data in the export. The configuration will be ignored if aggregation and grouping are provided."
        },
        "filter": {
          "oneOf": [
            {
              "$ref": "#/definitions/QueryFilter"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The filter expression to use in the query. Please reference our Query API REST documentation for how to properly format the filter."
        },
        "granularity": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Daily",
                "Hourly"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The granularity of rows in the query."
        },
        "grouping": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/QueryGrouping"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Array of group by expression to use in the query. Query can have up to 2 group by clauses."
        },
        "sorting": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/QuerySortingConfiguration"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Array of sorting by columns in query."
        }
      }
    },
    "QueryDatasetAggregation": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "$ref": "#/definitions/QueryAggregation"
      }
    },
    "QueryDatasetConfiguration": {
      "type": "object",
      "properties": {
        "columns": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Array of column names to be included in the query. Any valid query column name is allowed. If not provided, then query includes all columns."
        }
      }
    },
    "QueryDefinition": {
      "type": "object",
      "properties": {
        "dataset": {
          "oneOf": [
            {
              "$ref": "#/definitions/QueryDataset"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has definition for data in this query."
        },
        "timeframe": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "WeekToDate",
                "MonthToDate",
                "YearToDate",
                "TheLastWeek",
                "TheLastMonth",
                "TheLastYear",
                "Custom"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The time frame for pulling data for the query. If custom, then a specific time period must be provided."
        },
        "timePeriod": {
          "oneOf": [
            {
              "$ref": "#/definitions/QueryTimePeriod"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has time period for pulling data for the query."
        },
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Usage"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The type of the query."
        }
      },
      "required": [
        "timeframe",
        "type"
      ]
    },
    "QueryFilter": {
      "type": "object"
    },
    "QueryGrouping": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the column to group."
        },
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Tag",
                "Dimension"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Has type of the column to group."
        }
      },
      "required": [
        "name",
        "type"
      ]
    },
    "QuerySortingConfiguration": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the column to use in sorting."
        },
        "querySortingDirection": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Ascending",
                "Descending"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The sorting direction"
        }
      }
    },
    "QueryTimePeriod": {
      "type": "object",
      "properties": {
        "from": {
          "type": "string",
          "description": "The start date to pull data from."
        },
        "to": {
          "type": "string",
          "description": "The end date to pull data to."
        }
      },
      "required": [
        "from",
        "to"
      ]
    }
  }
}