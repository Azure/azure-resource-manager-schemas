{
  "id": "https://schema.management.azure.com/schemas/2021-09-15-preview/Microsoft.HDInsight.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.HDInsight",
  "description": "Microsoft HDInsight Resource Types",
  "resourceDefinitions": {
    "clusterpools": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2021-09-15-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "name": {
          "type": "string",
          "description": "The name of the cluster pool."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterPoolResourceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster pool resource properties."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/clusterpools_clusters_childResource"
              }
            ]
          }
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.HDInsight/clusterpools"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.HDInsight/clusterpools"
    },
    "clusterpools_clusters": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2021-09-15-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "name": {
          "type": "string",
          "description": "The name of the HDInsight cluster."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterResourceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster resource properties."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/clusterpools_clusters_sessionClusters_childResource"
              }
            ]
          }
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.HDInsight/clusterpools/clusters"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.HDInsight/clusterpools/clusters"
    },
    "clusterpools_clusters_sessionClusters": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2021-09-15-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "name": {
          "type": "string",
          "description": "The name of the HDInsight session cluster."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/SessionClusterResourceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Session cluster resource properties."
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.HDInsight/clusterpools/clusters/sessionClusters"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.HDInsight/clusterpools/clusters/sessionClusters"
    }
  },
  "definitions": {
    "ClusterAuthorizationProfile": {
      "type": "object",
      "properties": {
        "groupIds": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "AAD group Ids authorized for data plane access."
        },
        "userIds": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "AAD user Ids authorized for data plane access."
        }
      },
      "description": "Authorization profile with details of AAD user Ids and group Ids authorized for data plane access."
    },
    "ClusterConfigFile": {
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "description": "Free form content of the entire configuration file."
        },
        "fileName": {
          "type": "string",
          "description": "Configuration file name."
        },
        "path": {
          "type": "string",
          "description": "Path of the config file if content is specified."
        },
        "values": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of key value pairs\nwhere key represents a valid service configuration name and value represents the value of the config."
        }
      },
      "required": [
        "fileName"
      ],
      "description": "Cluster configuration files."
    },
    "ClusterLogAnalyticsApplicationLogs": {
      "type": "object",
      "properties": {
        "stdErrorEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "True if stderror is enabled, otherwise false."
        },
        "stdOutEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "True if stdout is enabled, otherwise false."
        }
      },
      "description": "Collection of logs to be enabled or disabled for log analytics."
    },
    "ClusterLogAnalyticsProfile": {
      "type": "object",
      "properties": {
        "applicationLogs": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterLogAnalyticsApplicationLogs"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Collection of logs to be enabled or disabled for log analytics."
        },
        "enabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "True if log analytics is enabled for the cluster, otherwise false."
        },
        "metricsEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "True if metrics are enabled, otherwise false."
        }
      },
      "required": [
        "enabled"
      ],
      "description": "Cluster log analytics profile to enable or disable OMS agent for cluster."
    },
    "ClusterPoolResourceProperties": {
      "type": "object",
      "properties": {
        "logAnalyticsProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterPoolResourcePropertiesLogAnalyticsProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster pool log analytics profile to enable OMS agent for AKS cluster."
        },
        "networkProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterPoolResourcePropertiesNetworkProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster pool network profile."
        }
      },
      "description": "Cluster pool resource properties."
    },
    "ClusterPoolResourcePropertiesLogAnalyticsProfile": {
      "type": "object",
      "properties": {
        "enabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "True if log analytics is enabled for cluster pool, otherwise false."
        },
        "workspaceId": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^/(subscriptions|SUBSCRIPTIONS)/([a-zA-Z0-9\\-]+)/(resourcegroups|resourceGroups|RESOURCEGROUPS)/([a-zA-Z0-9\\-_()\\.]+)/(providers|PROVIDERS)/(microsoft|Microsoft|MICROSOFT)\\.(operationalinsights|OperationalInsights|OPERATIONALINSIGHTS)/(workspaces|WORKSPACES)/([A-Za-z0-9][A-Za-z0-9\\-]+[A-Za-z0-9])$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Log analytics workspace to associate with the OMS agent."
        }
      },
      "required": [
        "enabled"
      ],
      "description": "Cluster pool log analytics profile to enable OMS agent for AKS cluster."
    },
    "ClusterPoolResourcePropertiesNetworkProfile": {
      "type": "object",
      "properties": {
        "subnetId": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^/(subscriptions|SUBSCRIPTIONS)/([a-zA-Z0-9\\-]+)/(resourcegroups|resourceGroups|RESOURCEGROUPS)/([a-zA-Z0-9\\-_()\\.]+)/(providers|PROVIDERS)/(microsoft|Microsoft|MICROSOFT)\\.(network|Network|NETWORK)/(virtualnetworks|virtualNetworks|VIRTUALNETWORKS)/([a-zA-Z0-9][a-zA-Z0-9_\\-\\.]{0,62}[a-zA-Z0-9_])/(subnets|SUBNETS)/([a-zA-Z0-9][a-zA-Z0-9_\\-\\.]{0,78}[a-zA-Z0-9_])$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster pool subnet resource id."
        }
      },
      "required": [
        "subnetId"
      ],
      "description": "Cluster pool network profile."
    },
    "clusterpools_clusters_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2021-09-15-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "name": {
          "type": "string",
          "description": "The name of the HDInsight cluster."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterResourceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster resource properties."
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "type": {
          "type": "string",
          "enum": [
            "clusters"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.HDInsight/clusterpools/clusters"
    },
    "clusterpools_clusters_sessionClusters_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2021-09-15-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "name": {
          "type": "string",
          "description": "The name of the HDInsight session cluster."
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/SessionClusterResourceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Session cluster resource properties."
        },
        "tags": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "type": {
          "type": "string",
          "enum": [
            "sessionClusters"
          ]
        }
      },
      "required": [
        "apiVersion",
        "location",
        "name",
        "properties",
        "type"
      ],
      "description": "Microsoft.HDInsight/clusterpools/clusters/sessionClusters"
    },
    "ClusterProfile": {
      "type": "object",
      "properties": {
        "authorizationProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterAuthorizationProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Authorization profile with details of AAD user Ids and group Ids authorized for data plane access."
        },
        "connectivityProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectivityProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster connectivity profile."
        },
        "flinkProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Flink cluster profile."
        },
        "identityProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/IdentityProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Identity Profile with details of an MSI."
        },
        "kafkaProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Kafka cluster profile."
        },
        "llapProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "LLAP cluster profile."
        },
        "logAnalyticsProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterLogAnalyticsProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster log analytics profile to enable or disable OMS agent for cluster."
        },
        "secretsProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterSecretsProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The cluster secret profile."
        },
        "serviceConfigsProfiles": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ClusterServiceConfigsProfile"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The service configs profiles."
        },
        "sessionStubProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Session stub cluster profile."
        },
        "sparkProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Spark cluster profile."
        },
        "sshProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/SshProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Ssh profile for the cluster."
        },
        "stackVersion": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^(0|[1-9][0-9]{0,18})\\.(0|[1-9][0-9]{0,18})\\.(0|[1-9][0-9]{0,18})-(0|[1-9][0-9]{0,18})\\.(0|[1-9][0-9]{0,18})$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The stack version."
        },
        "stubProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Stub cluster profile."
        },
        "trinoProfile": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {}
              },
              "properties": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Trino cluster profile."
        }
      },
      "required": [
        "authorizationProfile",
        "identityProfile",
        "stackVersion"
      ],
      "description": "Cluster profile."
    },
    "ClusterResourceProperties": {
      "type": "object",
      "properties": {
        "clusterProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster profile."
        },
        "clusterType": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z][a-zA-Z0-9]{0,31}$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The type of cluster."
        },
        "computeProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ComputeProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The compute profile."
        }
      },
      "required": [
        "clusterType",
        "computeProfile"
      ],
      "description": "Cluster resource properties."
    },
    "ClusterSecretReference": {
      "type": "object",
      "properties": {
        "keyVaultObjectName": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z][a-zA-Z0-9-]{1,126}$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Object identifier name of the secret in key vault."
        },
        "referenceName": {
          "type": "string",
          "description": "Reference name of the secret to be used in service configs."
        },
        "type": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^(key|Key|KEY|secret|Secret|SECRET|certificate|Certificate|CERTIFICATE)$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of key vault object: secret, key or certificate."
        },
        "version": {
          "type": "string",
          "description": "Version of the secret in key vault."
        }
      },
      "required": [
        "keyVaultObjectName",
        "referenceName",
        "type"
      ],
      "description": "Secret reference and corresponding properties of a key vault secret."
    },
    "ClusterSecretsProfile": {
      "type": "object",
      "properties": {
        "keyVaultResourceId": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^/(subscriptions|SUBSCRIPTIONS)/([a-zA-Z0-9\\-]+)/(resourcegroups|resourceGroups|RESOURCEGROUPS)/([a-zA-Z0-9\\-_()\\.]+)/(providers|PROVIDERS)/(microsoft|Microsoft|MICROSOFT)\\.(keyvault|KeyVault|KEYVAULT)/(vaults|VAULTS)/([a-zA-Z0-9\\-\\._~]+)$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Name of the user Key Vault where all the cluster specific user secrets are stored."
        },
        "secrets": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ClusterSecretReference"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Properties of Key Vault secret."
        }
      },
      "required": [
        "keyVaultResourceId"
      ],
      "description": "The cluster secret profile."
    },
    "ClusterServiceConfig": {
      "type": "object",
      "properties": {
        "component": {
          "type": "string",
          "description": "Name of the component the config files should apply to."
        },
        "files": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ClusterConfigFile"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of Config Files."
        }
      },
      "required": [
        "component",
        "files"
      ],
      "description": "Cluster configs per component."
    },
    "ClusterServiceConfigsProfile": {
      "type": "object",
      "properties": {
        "configs": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ClusterServiceConfig"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of service configs."
        },
        "serviceName": {
          "type": "string",
          "description": "Name of the service the configurations should apply to."
        }
      },
      "required": [
        "configs",
        "serviceName"
      ],
      "description": "Cluster service configs."
    },
    "ComputeProfile": {
      "type": "object",
      "properties": {
        "count": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The number of virtual machines."
        },
        "vmSize": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9_\\-]{0,256}$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The virtual machine SKU."
        }
      },
      "required": [
        "count",
        "vmSize"
      ],
      "description": "The compute profile."
    },
    "ConnectivityProfile": {
      "type": "object",
      "properties": {
        "ssh": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SshConnectivityEndpoint"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of SSH connectivity endpoints."
        },
        "web": {
          "oneOf": [
            {
              "$ref": "#/definitions/ConnectivityProfileWeb"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Web connectivity endpoint details."
        }
      },
      "required": [
        "web"
      ],
      "description": "Cluster connectivity profile."
    },
    "ConnectivityProfileWeb": {
      "type": "object",
      "properties": {
        "fqdn": {
          "type": "string",
          "description": "Web connectivity endpoint."
        }
      },
      "required": [
        "fqdn"
      ],
      "description": "Web connectivity endpoint details."
    },
    "IdentityProfile": {
      "type": "object",
      "properties": {
        "msiClientId": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[{(]?[0-9A-Fa-f]{8}[-]?(?:[0-9A-Fa-f]{4}[-]?){3}[0-9A-Fa-f]{12}[)}]?$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "ClientId of the MSI."
        },
        "msiObjectId": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[{(]?[0-9A-Fa-f]{8}[-]?(?:[0-9A-Fa-f]{4}[-]?){3}[0-9A-Fa-f]{12}[)}]?$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "ObjectId of the MSI."
        },
        "msiResourceId": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^/(subscriptions|SUBSCRIPTIONS)/([a-zA-Z0-9\\-]+)/(resourcegroups|resourceGroups|RESOURCEGROUPS)/([a-zA-Z0-9\\-_()\\.]+)/(providers|PROVIDERS)/(microsoft|Microsoft|MICROSOFT)\\.(managedidentity|ManagedIdentity|MANAGEDIDENTITY)/(userassignedidentities|userAssignedIdentities|USERASSIGNEDIDENTITIES)/([a-zA-Z0-9\\-\\._~]+)$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "ResourceId of the MSI."
        }
      },
      "required": [
        "msiClientId",
        "msiObjectId",
        "msiResourceId"
      ],
      "description": "Identity Profile with details of an MSI."
    },
    "SessionClusterResourceProperties": {
      "type": "object",
      "properties": {
        "clusterProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/ClusterProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster profile."
        }
      },
      "required": [
        "clusterProfile"
      ],
      "description": "Session cluster resource properties."
    },
    "SshConnectivityEndpoint": {
      "type": "object",
      "properties": {
        "endpoint": {
          "type": "string",
          "description": "SSH connectivity endpoint."
        }
      },
      "required": [
        "endpoint"
      ],
      "description": "SSH connectivity endpoint details."
    },
    "SshProfile": {
      "type": "object",
      "properties": {
        "count": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 5
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Number of ssh pods per cluster."
        },
        "podPrefix": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-z]([-a-z0-9]*[a-z0-9])?$",
              "minLength": 1,
              "maxLength": 58,
              "default": "pod"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Prefix of the pod names. Pod number will be appended to the prefix. The ingress URLs for the pods will be available at <clusterFqdn>/<sshBasePath>/<prefix>-<number>"
        }
      },
      "required": [
        "count"
      ],
      "description": "Ssh profile for the cluster."
    }
  }
}