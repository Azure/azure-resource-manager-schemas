{
  "id": "https://schema.management.azure.com/schemas/2023-10-01/Microsoft.SqlVirtualMachine.json#",
  "title": "Microsoft.SqlVirtualMachine",
  "description": "Microsoft SqlVirtualMachine Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "sqlVirtualMachineGroups_availabilityGroupListeners": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2023-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.SqlVirtualMachine/sqlVirtualMachineGroups/availabilityGroupListeners"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AvailabilityGroupListenerProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource properties."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.SqlVirtualMachine/sqlVirtualMachineGroups/availabilityGroupListeners"
    },
    "sqlVirtualMachineGroups": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2023-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.SqlVirtualMachine/sqlVirtualMachineGroups"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlVirtualMachineGroupProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource properties."
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/sqlVirtualMachineGroups_availabilityGroupListeners_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.SqlVirtualMachine/sqlVirtualMachineGroups"
    },
    "sqlVirtualMachines": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2023-10-01"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^((?!_)[^\\\\/\"'\\[\\]:|<>+=;,?*@&]{1,64}(?<![.-]))$",
              "minLength": 1,
              "maxLength": 64
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.SqlVirtualMachine/sqlVirtualMachines"
          ]
        },
        "identity": {
          "oneOf": [
            {
              "$ref": "#/definitions/ResourceIdentity"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "DO NOT USE. This value will be deprecated. Azure Active Directory identity of the server."
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlVirtualMachineProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource properties."
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.SqlVirtualMachine/sqlVirtualMachines"
    }
  },
  "definitions": {
    "AADAuthenticationSettings": {
      "type": "object",
      "properties": {
        "clientId": {
          "type": "string",
          "description": "The client Id of the Managed Identity to query Microsoft Graph API. An empty string must be used for the system assigned Managed Identity"
        }
      }
    },
    "AdditionalFeaturesServerConfigurations": {
      "type": "object",
      "properties": {
        "isRServicesEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable R services (SQL 2016 onwards)."
        }
      }
    },
    "AgConfiguration": {
      "type": "object",
      "properties": {
        "replicas": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AgReplica"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Replica configurations."
        }
      }
    },
    "AgReplica": {
      "type": "object",
      "properties": {
        "commit": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Synchronous_Commit",
                "Asynchronous_Commit"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Replica commit mode in availability group."
        },
        "failover": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Automatic",
                "Manual"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Replica failover mode in availability group."
        },
        "readableSecondary": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "No",
                "All",
                "Read_Only"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Replica readable secondary mode in availability group."
        },
        "role": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Primary",
                "Secondary"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Replica Role in availability group."
        },
        "sqlVirtualMachineInstanceId": {
          "type": "string",
          "description": "Sql VirtualMachine Instance Id."
        }
      }
    },
    "AssessmentSettings": {
      "type": "object",
      "properties": {
        "enable": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable SQL best practices Assessment feature on SQL virtual machine."
        },
        "runImmediately": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Run SQL best practices Assessment immediately on SQL virtual machine."
        },
        "schedule": {
          "oneOf": [
            {
              "$ref": "#/definitions/Schedule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Schedule for SQL best practices Assessment."
        }
      }
    },
    "AutoBackupSettings": {
      "type": "object",
      "properties": {
        "backupScheduleType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Manual",
                "Automated"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Backup schedule type."
        },
        "backupSystemDbs": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Include or exclude system databases from auto backup."
        },
        "daysOfWeek": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "Monday",
                  "Tuesday",
                  "Wednesday",
                  "Thursday",
                  "Friday",
                  "Saturday",
                  "Sunday"
                ]
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Days of the week for the backups when FullBackupFrequency is set to Weekly."
        },
        "enable": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable autobackup on SQL virtual machine."
        },
        "enableEncryption": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable encryption for backup on SQL virtual machine."
        },
        "fullBackupFrequency": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Daily",
                "Weekly"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Frequency of full backups. In both cases, full backups begin during the next scheduled time window."
        },
        "fullBackupStartTime": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Start time of a given day during which full backups can take place. 0-23 hours."
        },
        "fullBackupWindowHours": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Duration of the time window of a given day during which full backups can take place. 1-23 hours."
        },
        "logBackupFrequency": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Frequency of log backups. 5-60 minutes."
        },
        "password": {
          "type": "string",
          "description": "Password for encryption on backup."
        },
        "retentionPeriod": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Retention period of backup: 1-90 days."
        },
        "storageAccessKey": {
          "type": "string",
          "description": "Storage account key where backup will be taken to."
        },
        "storageAccountUrl": {
          "type": "string",
          "description": "Storage account url where backup will be taken to."
        },
        "storageContainerName": {
          "type": "string",
          "description": "Storage container name where backup will be taken to."
        }
      }
    },
    "AutoPatchingSettings": {
      "type": "object",
      "properties": {
        "additionalVmPatch": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "NotSet",
                "MicrosoftUpdate"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Additional Patch to be enable or enabled on the SQL Virtual Machine."
        },
        "dayOfWeek": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Everyday",
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday",
                "Sunday"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Day of week to apply the patch on."
        },
        "enable": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable autopatching on SQL virtual machine."
        },
        "maintenanceWindowDuration": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Duration of patching."
        },
        "maintenanceWindowStartingHour": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Hour of the day when patching is initiated. Local VM time."
        }
      }
    },
    "AvailabilityGroupListenerProperties": {
      "type": "object",
      "properties": {
        "availabilityGroupConfiguration": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Availability Group configuration."
        },
        "availabilityGroupName": {
          "type": "string",
          "description": "Name of the availability group."
        },
        "createDefaultAvailabilityGroupIfNotExist": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Create a default availability group if it does not exist."
        },
        "loadBalancerConfigurations": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/LoadBalancerConfiguration"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of load balancer configurations for an availability group listener."
        },
        "multiSubnetIpConfigurations": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/MultiSubnetIpConfiguration"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of multi subnet IP configurations for an AG listener."
        },
        "port": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Listener port."
        }
      }
    },
    "KeyVaultCredentialSettings": {
      "type": "object",
      "properties": {
        "azureKeyVaultUrl": {
          "type": "string",
          "description": "Azure Key Vault url."
        },
        "credentialName": {
          "type": "string",
          "description": "Credential name."
        },
        "enable": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable key vault credential setting."
        },
        "servicePrincipalName": {
          "type": "string",
          "description": "Service principal name to access key vault."
        },
        "servicePrincipalSecret": {
          "type": "string",
          "description": "Service principal name secret to access key vault."
        }
      }
    },
    "LoadBalancerConfiguration": {
      "type": "object",
      "properties": {
        "loadBalancerResourceId": {
          "type": "string",
          "description": "Resource id of the load balancer."
        },
        "privateIpAddress": {
          "oneOf": [
            {
              "$ref": "#/definitions/PrivateIPAddress"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Private IP address."
        },
        "probePort": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Probe port."
        },
        "publicIpAddressResourceId": {
          "type": "string",
          "description": "Resource id of the public IP."
        },
        "sqlVirtualMachineInstances": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "List of the SQL virtual machine instance resource id's that are enrolled into the availability group listener."
        }
      }
    },
    "MultiSubnetIpConfiguration": {
      "type": "object",
      "properties": {
        "privateIpAddress": {
          "oneOf": [
            {
              "$ref": "#/definitions/PrivateIPAddress"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Private IP address."
        },
        "sqlVirtualMachineInstance": {
          "type": "string",
          "description": "SQL virtual machine instance resource id that are enrolled into the availability group listener."
        }
      },
      "required": [
        "privateIpAddress",
        "sqlVirtualMachineInstance"
      ]
    },
    "PrivateIPAddress": {
      "type": "object",
      "properties": {
        "ipAddress": {
          "type": "string",
          "description": "Private IP address bound to the availability group listener."
        },
        "subnetResourceId": {
          "type": "string",
          "description": "Subnet used to include private IP."
        }
      }
    },
    "ResourceIdentity": {
      "type": "object",
      "properties": {
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "SystemAssigned",
                "UserAssigned",
                "SystemAssigned,UserAssigned"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The identity type. Set this to 'SystemAssigned' in order to automatically create and assign an Azure Active Directory principal for the resource."
        }
      }
    },
    "Schedule": {
      "type": "object",
      "properties": {
        "dayOfWeek": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday",
                "Sunday"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Day of the week to run assessment."
        },
        "enable": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable or disable assessment schedule on SQL virtual machine."
        },
        "monthlyOccurrence": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Occurrence of the DayOfWeek day within a month to schedule assessment. Takes values: 1,2,3,4 and -1. Use -1 for last DayOfWeek day of the month"
        },
        "startTime": {
          "type": "string",
          "description": "Time of the day in HH:mm format. Eg. 17:30"
        },
        "weeklyInterval": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Number of weeks to schedule between 2 assessment runs. Takes value from 1-6"
        }
      }
    },
    "ServerConfigurationsManagementSettings": {
      "type": "object",
      "properties": {
        "additionalFeaturesServerConfigurations": {
          "oneOf": [
            {
              "$ref": "#/definitions/AdditionalFeaturesServerConfigurations"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Additional SQL feature settings."
        },
        "azureAdAuthenticationSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/AADAuthenticationSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Azure AD authentication Settings."
        },
        "sqlConnectivityUpdateSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlConnectivityUpdateSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL connectivity type settings."
        },
        "sqlInstanceSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SQLInstanceSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Instance settings."
        },
        "sqlStorageUpdateSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlStorageUpdateSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL storage update settings."
        },
        "sqlWorkloadTypeUpdateSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SqlWorkloadTypeUpdateSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL workload type settings."
        }
      }
    },
    "SqlConnectivityUpdateSettings": {
      "type": "object",
      "properties": {
        "connectivityType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "LOCAL",
                "PRIVATE",
                "PUBLIC"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server connectivity option."
        },
        "port": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server port."
        },
        "sqlAuthUpdatePassword": {
          "type": "string",
          "description": "SQL Server sysadmin login password."
        },
        "sqlAuthUpdateUserName": {
          "type": "string",
          "description": "SQL Server sysadmin login to create."
        }
      }
    },
    "SQLInstanceSettings": {
      "type": "object",
      "properties": {
        "collation": {
          "type": "string",
          "description": "SQL Server Collation."
        },
        "isIfiEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server IFI."
        },
        "isLpimEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server LPIM."
        },
        "isOptimizeForAdHocWorkloadsEnabled": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server Optimize for Adhoc workloads."
        },
        "maxDop": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server MAXDOP."
        },
        "maxServerMemoryMB": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server maximum memory."
        },
        "minServerMemoryMB": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server minimum memory."
        }
      }
    },
    "SQLStorageSettings": {
      "type": "object",
      "properties": {
        "defaultFilePath": {
          "type": "string",
          "description": "SQL Server default file path"
        },
        "luns": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "integer"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Logical Unit Numbers for the disks."
        },
        "useStoragePool": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Use storage pool to build a drive if true or not provided"
        }
      }
    },
    "SqlStorageUpdateSettings": {
      "type": "object",
      "properties": {
        "diskConfigurationType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "NEW",
                "EXTEND",
                "ADD"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Disk configuration to apply to SQL Server."
        },
        "diskCount": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Virtual machine disk count."
        },
        "startingDeviceId": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Device id of the first disk to be updated."
        }
      }
    },
    "SQLTempDbSettings": {
      "type": "object",
      "properties": {
        "dataFileCount": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server tempdb data file count"
        },
        "dataFileSize": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server tempdb data file size"
        },
        "dataGrowth": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server tempdb data file autoGrowth size"
        },
        "defaultFilePath": {
          "type": "string",
          "description": "SQL Server default file path"
        },
        "logFileSize": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server tempdb log file size"
        },
        "logGrowth": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server tempdb log file autoGrowth size"
        },
        "luns": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "integer"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Logical Unit Numbers for the disks."
        },
        "persistFolder": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server tempdb persist folder choice"
        },
        "persistFolderPath": {
          "type": "string",
          "description": "SQL Server tempdb persist folder location"
        },
        "useStoragePool": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Use storage pool to build a drive if true or not provided"
        }
      }
    },
    "SqlVirtualMachineGroupProperties": {
      "type": "object",
      "properties": {
        "sqlImageOffer": {
          "type": "string",
          "description": "SQL image offer. Examples may include SQL2016-WS2016, SQL2017-WS2016."
        },
        "sqlImageSku": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Developer",
                "Enterprise"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL image sku."
        },
        "wsfcDomainProfile": {
          "oneOf": [
            {
              "$ref": "#/definitions/WsfcDomainProfile"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster Active Directory domain profile."
        }
      }
    },
    "SqlVirtualMachineProperties": {
      "type": "object",
      "properties": {
        "assessmentSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/AssessmentSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL best practices Assessment Settings."
        },
        "autoBackupSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/AutoBackupSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Auto backup settings for SQL Server."
        },
        "autoPatchingSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/AutoPatchingSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Auto patching settings for applying critical security updates to SQL virtual machine."
        },
        "enableAutomaticUpgrade": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable automatic upgrade of Sql IaaS extension Agent."
        },
        "keyVaultCredentialSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/KeyVaultCredentialSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Key vault credential settings."
        },
        "leastPrivilegeMode": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Enabled",
                "NotSet"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL IaaS Agent least privilege mode."
        },
        "serverConfigurationsManagementSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/ServerConfigurationsManagementSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server configuration management settings."
        },
        "sqlImageOffer": {
          "type": "string",
          "description": "SQL image offer. Examples include SQL2016-WS2016, SQL2017-WS2016."
        },
        "sqlImageSku": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Developer",
                "Express",
                "Standard",
                "Enterprise",
                "Web"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server edition type."
        },
        "sqlManagement": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Full",
                "LightWeight",
                "NoAgent"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server Management type. NOTE: This parameter is not used anymore. API will automatically detect the Sql Management, refrain from using it."
        },
        "sqlServerLicenseType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "PAYG",
                "AHUB",
                "DR"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server license type."
        },
        "sqlVirtualMachineGroupResourceId": {
          "type": "string",
          "description": "ARM resource id of the SQL virtual machine group this SQL virtual machine is or will be part of."
        },
        "storageConfigurationSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/StorageConfigurationSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Storage Configuration Settings."
        },
        "virtualMachineIdentitySettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/VirtualMachineIdentity"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Virtual Machine Identity details used for Sql IaaS extension configurations."
        },
        "virtualMachineResourceId": {
          "type": "string",
          "description": "ARM Resource id of underlying virtual machine created from SQL marketplace image."
        },
        "wsfcDomainCredentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/WsfcDomainCredentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Domain credentials for setting up Windows Server Failover Cluster for SQL availability group."
        },
        "wsfcStaticIp": {
          "type": "string",
          "description": "Domain credentials for setting up Windows Server Failover Cluster for SQL availability group."
        }
      }
    },
    "SqlWorkloadTypeUpdateSettings": {
      "type": "object",
      "properties": {
        "sqlWorkloadType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "GENERAL",
                "OLTP",
                "DW"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server workload type."
        }
      }
    },
    "StorageConfigurationSettings": {
      "type": "object",
      "properties": {
        "diskConfigurationType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "NEW",
                "EXTEND",
                "ADD"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Disk configuration to apply to SQL Server."
        },
        "enableStorageConfigBlade": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Enable SQL IaaS Agent storage configuration blade in Azure Portal."
        },
        "sqlDataSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SQLStorageSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server Data Storage Settings."
        },
        "sqlLogSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SQLStorageSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server Log Storage Settings."
        },
        "sqlSystemDbOnDataDisk": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server SystemDb Storage on DataPool if true."
        },
        "sqlTempDbSettings": {
          "oneOf": [
            {
              "$ref": "#/definitions/SQLTempDbSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "SQL Server TempDb Storage Settings."
        },
        "storageWorkloadType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "GENERAL",
                "OLTP",
                "DW"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Storage workload type."
        }
      }
    },
    "TrackedResourceTags": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string"
      }
    },
    "VirtualMachineIdentity": {
      "type": "object",
      "properties": {
        "resourceId": {
          "type": "string",
          "description": "ARM Resource Id of the identity. Only required when UserAssigned identity is selected."
        },
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "SystemAssigned",
                "UserAssigned"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Identity type of the virtual machine. Specify None to opt-out of Managed Identities."
        }
      }
    },
    "WsfcDomainCredentials": {
      "type": "object",
      "properties": {
        "clusterBootstrapAccountPassword": {
          "type": "string",
          "description": "Cluster bootstrap account password."
        },
        "clusterOperatorAccountPassword": {
          "type": "string",
          "description": "Cluster operator account password."
        },
        "sqlServiceAccountPassword": {
          "type": "string",
          "description": "SQL service account password."
        }
      }
    },
    "WsfcDomainProfile": {
      "type": "object",
      "properties": {
        "clusterBootstrapAccount": {
          "type": "string",
          "description": "Account name used for creating cluster (at minimum needs permissions to 'Create Computer Objects' in domain)."
        },
        "clusterOperatorAccount": {
          "type": "string",
          "description": "Account name used for operating cluster i.e. will be part of administrators group on all the participating virtual machines in the cluster."
        },
        "clusterSubnetType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "SingleSubnet",
                "MultiSubnet"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Cluster subnet type."
        },
        "domainFqdn": {
          "type": "string",
          "description": "Fully qualified name of the domain."
        },
        "fileShareWitnessPath": {
          "type": "string",
          "description": "Optional path for fileshare witness."
        },
        "isSqlServiceAccountGmsa": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The flag to check if SQL service account is GMSA."
        },
        "ouPath": {
          "type": "string",
          "description": "Organizational Unit path in which the nodes and cluster will be present."
        },
        "sqlServiceAccount": {
          "type": "string",
          "description": "Account name under which SQL service will run on all participating SQL virtual machines in the cluster."
        },
        "storageAccountPrimaryKey": {
          "type": "string",
          "description": "Primary key of the witness storage account."
        },
        "storageAccountUrl": {
          "type": "string",
          "description": "Fully qualified ARM resource id of the witness storage account."
        }
      }
    },
    "sqlVirtualMachineGroups_availabilityGroupListeners_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2023-10-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "availabilityGroupListeners"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AvailabilityGroupListenerProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource properties."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.SqlVirtualMachine/sqlVirtualMachineGroups/availabilityGroupListeners"
    }
  }
}