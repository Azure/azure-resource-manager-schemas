{
  "id": "https://schema.management.azure.com/schemas/2023-12-01-preview/Microsoft.Workloads.monitors.json#",
  "title": "Microsoft.Workloads",
  "description": "Microsoft Workloads Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "monitors": {
      "description": "Microsoft.Workloads/monitors",
      "properties": {
        "apiVersion": {
          "enum": [
            "2023-12-01-preview"
          ],
          "type": "string"
        },
        "identity": {
          "description": "The managed service identities assigned to this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedServiceIdentity"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "location": {
          "description": "The geo-location where the resource lives",
          "type": "string"
        },
        "name": {
          "description": "Name of the SAP monitor resource.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9-_]+$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/MonitorProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "resources": {
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/monitors_providerInstances_childResource"
              },
              {
                "$ref": "#/definitions/monitors_sapLandscapeMonitor_childResource"
              }
            ]
          },
          "type": "array"
        },
        "tags": {
          "description": "Resource tags.",
          "oneOf": [
            {
              "additionalProperties": {
                "type": "string"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.Workloads/monitors"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "monitors_providerInstances": {
      "description": "Microsoft.Workloads/monitors/providerInstances",
      "properties": {
        "apiVersion": {
          "enum": [
            "2023-12-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the provider instance.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9-_]+$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/ProviderInstanceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.Workloads/monitors/providerInstances"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "monitors_sapLandscapeMonitor": {
      "description": "Microsoft.Workloads/monitors/sapLandscapeMonitor",
      "properties": {
        "apiVersion": {
          "enum": [
            "2023-12-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "oneOf": [
            {
              "pattern": "^.*/default$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/SapLandscapeMonitorProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.Workloads/monitors/sapLandscapeMonitor"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    }
  },
  "definitions": {
    "AppServicePlanConfiguration": {
      "description": "Configuration details of app service plan",
      "properties": {
        "capacity": {
          "description": "The number of workers in app service plan. If this is not set or set to 0, auto scale will be configured for the app service plan, otherwise, instance count is set to this number.",
          "oneOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "tier": {
          "description": "The App Service plan tier.",
          "oneOf": [
            {
              "enum": [
                "ElasticPremium",
                "PremiumV3"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "ManagedResourceGroupConfiguration": {
      "description": "Managed resource group configuration",
      "properties": {
        "name": {
          "description": "Managed resource group name",
          "type": "string"
        }
      },
      "type": "object"
    },
    "ManagedServiceIdentity": {
      "description": "Managed service identity (system assigned and/or user assigned identities)",
      "properties": {
        "type": {
          "description": "Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed).",
          "oneOf": [
            {
              "enum": [
                "None",
                "SystemAssigned",
                "UserAssigned",
                "SystemAssigned,UserAssigned"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "userAssignedIdentities": {
          "description": "The set of user assigned identities associated with the resource. The userAssignedIdentities dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}. The dictionary values can be empty objects ({}) in requests.",
          "oneOf": [
            {
              "additionalProperties": {
                "$ref": "#/definitions/UserAssignedIdentity"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "type"
      ],
      "type": "object"
    },
    "MonitorProperties": {
      "description": "Describes the properties of a SAP monitor.",
      "properties": {
        "appLocation": {
          "description": "The SAP monitor resources will be deployed in the SAP monitoring region. The subnet region should be same as the SAP monitoring region.",
          "type": "string"
        },
        "appServicePlanConfiguration": {
          "description": "App service plan configuration",
          "oneOf": [
            {
              "$ref": "#/definitions/AppServicePlanConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "logAnalyticsWorkspaceArmId": {
          "description": "The ARM ID of the Log Analytics Workspace that is used for SAP monitoring.",
          "type": "string"
        },
        "managedResourceGroupConfiguration": {
          "description": "Managed resource group configuration",
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedResourceGroupConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "monitorSubnet": {
          "description": "The subnet which the SAP monitor will be deployed in",
          "type": "string"
        },
        "routingPreference": {
          "description": "Sets the routing preference of the SAP monitor. By default only RFC1918 traffic is routed to the customer VNET.",
          "oneOf": [
            {
              "enum": [
                "Default",
                "RouteAll"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "zoneRedundancyPreference": {
          "description": "Sets the preference for zone redundancy on resources created for the SAP monitor. By default resources will be created which do not support zone redundancy.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "ProviderInstanceProperties": {
      "description": "Describes the properties of a provider instance.",
      "properties": {
        "providerSettings": {
          "description": "Defines the provider specific properties.",
          "oneOf": [
            {
              "$ref": "#/definitions/ProviderSpecificProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "ProviderSpecificProperties": {
      "description": "Gets or sets the provider specific properties.",
      "oneOf": [
        {
          "description": "Gets or sets the DB2 provider properties.",
          "properties": {
            "dbName": {
              "description": "Gets or sets the db2 database name.",
              "type": "string"
            },
            "dbPassword": {
              "description": "Gets or sets the db2 database password.",
              "type": "string"
            },
            "dbPasswordUri": {
              "description": "Gets or sets the key vault URI to secret with the database password.",
              "type": "string"
            },
            "dbPort": {
              "description": "Gets or sets the db2 database sql port.",
              "type": "string"
            },
            "dbUsername": {
              "description": "Gets or sets the db2 database user name.",
              "type": "string"
            },
            "hostname": {
              "description": "Gets or sets the target virtual machine name.",
              "type": "string"
            },
            "providerType": {
              "enum": [
                "Db2"
              ],
              "type": "string"
            },
            "sapSid": {
              "description": "Gets or sets the SAP System Identifier",
              "type": "string"
            },
            "sslCertificateUri": {
              "description": "Gets or sets the blob URI to SSL certificate for the DB2 Database.",
              "type": "string"
            },
            "sslPreference": {
              "description": "Gets or sets certificate preference if secure communication is enabled.",
              "oneOf": [
                {
                  "enum": [
                    "Disabled",
                    "RootCertificate",
                    "ServerCertificate"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            }
          },
          "required": [
            "providerType"
          ],
          "type": "object"
        },
        {
          "description": "Gets or sets the SQL server provider properties.",
          "properties": {
            "dbPassword": {
              "description": "Gets or sets the database password.",
              "type": "string"
            },
            "dbPasswordUri": {
              "description": "Gets or sets the key vault URI to secret with the database password.",
              "type": "string"
            },
            "dbPort": {
              "description": "Gets or sets the database sql port.",
              "type": "string"
            },
            "dbUsername": {
              "description": "Gets or sets the database user name.",
              "type": "string"
            },
            "hostname": {
              "description": "Gets or sets the SQL server host name.",
              "type": "string"
            },
            "providerType": {
              "enum": [
                "MsSqlServer"
              ],
              "type": "string"
            },
            "sapSid": {
              "description": "Gets or sets the SAP System Identifier",
              "type": "string"
            },
            "sslCertificateUri": {
              "description": "Gets or sets the blob URI to SSL certificate for the SQL Database.",
              "type": "string"
            },
            "sslPreference": {
              "description": "Gets or sets certificate preference if secure communication is enabled.",
              "oneOf": [
                {
                  "enum": [
                    "Disabled",
                    "RootCertificate",
                    "ServerCertificate"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            }
          },
          "required": [
            "providerType"
          ],
          "type": "object"
        },
        {
          "description": "Gets or sets the PrometheusHaCluster provider properties.",
          "properties": {
            "clusterName": {
              "description": "Gets or sets the clusterName.",
              "type": "string"
            },
            "hostname": {
              "description": "Gets or sets the target machine name.",
              "type": "string"
            },
            "prometheusUrl": {
              "description": "URL of the Node Exporter endpoint.",
              "type": "string"
            },
            "providerType": {
              "enum": [
                "PrometheusHaCluster"
              ],
              "type": "string"
            },
            "sid": {
              "description": "Gets or sets the cluster sid.",
              "type": "string"
            },
            "sslCertificateUri": {
              "description": "Gets or sets the blob URI to SSL certificate for the HA cluster exporter.",
              "type": "string"
            },
            "sslPreference": {
              "description": "Gets or sets certificate preference if secure communication is enabled.",
              "oneOf": [
                {
                  "enum": [
                    "Disabled",
                    "RootCertificate",
                    "ServerCertificate"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            }
          },
          "required": [
            "providerType"
          ],
          "type": "object"
        },
        {
          "description": "Gets or sets the PrometheusOS provider properties.",
          "properties": {
            "prometheusUrl": {
              "description": "URL of the Node Exporter endpoint",
              "type": "string"
            },
            "providerType": {
              "enum": [
                "PrometheusOS"
              ],
              "type": "string"
            },
            "sapSid": {
              "description": "Gets or sets the SAP System Identifier",
              "type": "string"
            },
            "sslCertificateUri": {
              "description": "Gets or sets the blob URI to SSL certificate for the prometheus node exporter.",
              "type": "string"
            },
            "sslPreference": {
              "description": "Gets or sets certificate preference if secure communication is enabled.",
              "oneOf": [
                {
                  "enum": [
                    "Disabled",
                    "RootCertificate",
                    "ServerCertificate"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            }
          },
          "required": [
            "providerType"
          ],
          "type": "object"
        },
        {
          "description": "Gets or sets the provider properties.",
          "properties": {
            "dbName": {
              "description": "Gets or sets the hana database name.",
              "type": "string"
            },
            "dbPassword": {
              "description": "Gets or sets the database password.",
              "type": "string"
            },
            "dbPasswordUri": {
              "description": "Gets or sets the key vault URI to secret with the database password.",
              "type": "string"
            },
            "dbUsername": {
              "description": "Gets or sets the database user name.",
              "type": "string"
            },
            "hostname": {
              "description": "Gets or sets the target virtual machine size.",
              "type": "string"
            },
            "instanceNumber": {
              "description": "Gets or sets the database instance number.",
              "type": "string"
            },
            "providerType": {
              "enum": [
                "SapHana"
              ],
              "type": "string"
            },
            "sapSid": {
              "description": "Gets or sets the SAP System Identifier.",
              "type": "string"
            },
            "sqlPort": {
              "description": "Gets or sets the database sql port.",
              "type": "string"
            },
            "sslCertificateUri": {
              "description": "Gets or sets the blob URI to SSL certificate for the DB.",
              "type": "string"
            },
            "sslHostNameInCertificate": {
              "description": "Gets or sets the hostname(s) in the SSL certificate.",
              "type": "string"
            },
            "sslPreference": {
              "description": "Gets or sets certificate preference if secure communication is enabled.",
              "oneOf": [
                {
                  "enum": [
                    "Disabled",
                    "RootCertificate",
                    "ServerCertificate"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            }
          },
          "required": [
            "providerType"
          ],
          "type": "object"
        },
        {
          "description": "Gets or sets the provider properties.",
          "properties": {
            "providerType": {
              "enum": [
                "SapNetWeaver"
              ],
              "type": "string"
            },
            "sapClientId": {
              "description": "Gets or sets the SAP Client ID.",
              "type": "string"
            },
            "sapHostFileEntries": {
              "description": "Gets or sets the list of HostFile Entries",
              "oneOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            },
            "sapHostname": {
              "description": "Gets or sets the target virtual machine IP Address/FQDN.",
              "type": "string"
            },
            "sapInstanceNr": {
              "description": "Gets or sets the instance number of SAP NetWeaver.",
              "type": "string"
            },
            "sapPassword": {
              "description": "Sets the SAP password.",
              "type": "string"
            },
            "sapPasswordUri": {
              "description": "Gets or sets the key vault URI to secret with the SAP password.",
              "type": "string"
            },
            "sapPortNumber": {
              "description": "Gets or sets the SAP HTTP port number.",
              "type": "string"
            },
            "sapSid": {
              "description": "Gets or sets the SAP System Identifier",
              "type": "string"
            },
            "sapUsername": {
              "description": "Gets or sets the SAP user name.",
              "type": "string"
            },
            "sslCertificateUri": {
              "description": "Gets or sets the blob URI to SSL certificate for the SAP system.",
              "type": "string"
            },
            "sslPreference": {
              "description": "Gets or sets certificate preference if secure communication is enabled.",
              "oneOf": [
                {
                  "enum": [
                    "Disabled",
                    "RootCertificate",
                    "ServerCertificate"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            }
          },
          "required": [
            "providerType"
          ],
          "type": "object"
        }
      ],
      "properties": {},
      "type": "object"
    },
    "SapLandscapeMonitorMetricThresholds": {
      "description": "Gets or sets the Threshold Values for Top Metrics Health.",
      "properties": {
        "green": {
          "description": "Gets or sets the threshold value for Green.",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "name": {
          "description": "Gets or sets the name of the threshold.",
          "type": "string"
        },
        "red": {
          "description": "Gets or sets the threshold value for Red.",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "yellow": {
          "description": "Gets or sets the threshold value for Yellow.",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "SapLandscapeMonitorProperties": {
      "description": "Gets or sets the properties for Sap Landscape Monitor Dashboard.",
      "properties": {
        "grouping": {
          "description": "Gets or sets the SID groupings by landscape and Environment.",
          "oneOf": [
            {
              "$ref": "#/definitions/SapLandscapeMonitorPropertiesGrouping"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "topMetricsThresholds": {
          "description": "Gets or sets the list Top Metric Thresholds for SAP Landscape Monitor Dashboard",
          "oneOf": [
            {
              "items": {
                "$ref": "#/definitions/SapLandscapeMonitorMetricThresholds"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "SapLandscapeMonitorPropertiesGrouping": {
      "description": "Gets or sets the SID groupings by landscape and Environment.",
      "properties": {
        "landscape": {
          "description": "Gets or sets the list of landscape to SID mappings.",
          "oneOf": [
            {
              "items": {
                "$ref": "#/definitions/SapLandscapeMonitorSidMapping"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "sapApplication": {
          "description": "Gets or sets the list of Sap Applications to SID mappings.",
          "oneOf": [
            {
              "items": {
                "$ref": "#/definitions/SapLandscapeMonitorSidMapping"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "SapLandscapeMonitorSidMapping": {
      "description": "Gets or sets the mapping for SID to Environment/Applications.",
      "properties": {
        "name": {
          "description": "Gets or sets the name of the grouping.",
          "type": "string"
        },
        "topSid": {
          "description": "Gets or sets the list of SID's.",
          "oneOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "UserAssignedIdentity": {
      "description": "User assigned identity properties",
      "properties": {},
      "type": "object"
    },
    "monitors_providerInstances_childResource": {
      "description": "Microsoft.Workloads/monitors/providerInstances",
      "properties": {
        "apiVersion": {
          "enum": [
            "2023-12-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the provider instance.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9-_]+$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/ProviderInstanceProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "providerInstances"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "monitors_sapLandscapeMonitor_childResource": {
      "description": "Microsoft.Workloads/monitors/sapLandscapeMonitor",
      "properties": {
        "apiVersion": {
          "enum": [
            "2023-12-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "oneOf": [
            {
              "enum": [
                "default"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/SapLandscapeMonitorProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "sapLandscapeMonitor"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    }
  }
}