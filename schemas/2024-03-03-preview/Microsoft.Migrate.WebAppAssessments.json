{
  "id": "https://schema.management.azure.com/schemas/2024-03-03-preview/Microsoft.Migrate.WebAppAssessments.json#",
  "title": "Microsoft.Migrate",
  "description": "Microsoft Migrate Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "assessmentProjects_webAppAssessments": {
      "description": "Microsoft.Migrate/assessmentProjects/webAppAssessments",
      "properties": {
        "apiVersion": {
          "enum": [
            "2024-03-03-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "WebApp Assessment ARM name",
          "oneOf": [
            {
              "pattern": "^[^<>&:\\?/#]{1,260}$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/WebAppAssessmentV3Properties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.Migrate/assessmentProjects/webAppAssessments"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    }
  },
  "definitions": {
    "AppSvcContainerSettings": {
      "description": "App service container settings.",
      "properties": {
        "isolationRequired": {
          "description": "Gets or sets the isolation required.",
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "isolationRequired"
      ],
      "type": "object"
    },
    "AppSvcNativeSettings": {
      "description": "App service native settings.",
      "properties": {
        "isolationRequired": {
          "description": "Gets or sets the isolation required.",
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "isolationRequired"
      ],
      "type": "object"
    },
    "AssessmentDetails": {
      "description": "Assessment details class.",
      "properties": {},
      "type": "object"
    },
    "BillingSettings": {
      "description": "Billing settings class.",
      "properties": {
        "licensingProgram": {
          "description": "Gets or sets the licensing program.",
          "oneOf": [
            {
              "enum": [
                "Retail",
                "Unknown",
                "EA",
                "MCA"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "subscriptionId": {
          "description": "Gets or sets the subscription ID for licensing program selected.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "PerformanceData": {
      "description": "Performance data class.",
      "properties": {
        "percentile": {
          "description": "Percentile of the utilization data values to be considered while assessing\nmachines.",
          "oneOf": [
            {
              "enum": [
                "Percentile50",
                "Percentile90",
                "Percentile95",
                "Percentile99",
                "PercentileUnknown"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "perfDataEndTime": {
          "description": "Gets or sets the end time to consider performance data for assessment.",
          "format": "date-time",
          "type": "string"
        },
        "perfDataStartTime": {
          "description": "Gets or sets the start time to consider performance data for assessment.",
          "format": "date-time",
          "type": "string"
        },
        "timeRange": {
          "description": "Time Range for which the historic utilization data should be considered for\nassessment.",
          "oneOf": [
            {
              "enum": [
                "Day",
                "Week",
                "Month",
                "Custom"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "SavingsSettings": {
      "description": "Savings settings class.",
      "properties": {
        "azureOfferCode": {
          "description": "Gets or sets the Azure offer code.",
          "oneOf": [
            {
              "enum": [
                "Unknown",
                "MSAZR0003P",
                "MSAZR0023P",
                "MSMCAZR0044P",
                "MSMCAZR0059P",
                "MSMCAZR0060P",
                "MSMCAZR0063P",
                "MSAZRUSGOV0003P",
                "EA",
                "SavingsPlan1Year",
                "SavingsPlan3Year"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "savingsOptions": {
          "description": "Gets or sets the savings options.",
          "oneOf": [
            {
              "enum": [
                "None",
                "RI1Year",
                "RI3Year",
                "SavingsPlan1Year",
                "SavingsPlan3Year",
                "CustomAzureOfferCode"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "Scope": {
      "description": "Scope of the assessment.",
      "properties": {
        "azureResourceGraphQuery": {
          "description": "The ARG query.",
          "type": "string"
        },
        "scopeType": {
          "description": "The scope type",
          "oneOf": [
            {
              "enum": [
                "ServerGroupId",
                "AzureResourceGraphQuery"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "serverGroupId": {
          "description": "The server group arm id.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "WebAppAssessmentSettings": {
      "description": "Web app assessment settings class.",
      "properties": {
        "appSvcContainerSettings": {
          "description": "App Service container settings.",
          "oneOf": [
            {
              "$ref": "#/definitions/AppSvcContainerSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "appSvcNativeSettings": {
          "description": "App Service native settings.",
          "oneOf": [
            {
              "$ref": "#/definitions/AppSvcNativeSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "azureLocation": {
          "description": "Azure Location or Azure region where to which the machines will be migrated.",
          "type": "string"
        },
        "azureSecurityOfferingType": {
          "description": "Azure security offering type.",
          "oneOf": [
            {
              "enum": [
                "NO",
                "MDC"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "billingSettings": {
          "description": "Gets or sets the billing settings.",
          "oneOf": [
            {
              "$ref": "#/definitions/BillingSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "currency": {
          "description": "Currency in which prices should be reported.",
          "oneOf": [
            {
              "enum": [
                "Unknown",
                "USD",
                "DKK",
                "CAD",
                "IDR",
                "JPY",
                "KRW",
                "NZD",
                "NOK",
                "RUB",
                "SAR",
                "ZAR",
                "SEK",
                "TRY",
                "GBP",
                "MXN",
                "MYR",
                "INR",
                "HKD",
                "BRL",
                "TWD",
                "EUR",
                "CHF",
                "ARS",
                "AUD",
                "CNY"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "discountPercentage": {
          "description": "Custom discount percentage.",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "environmentType": {
          "description": "Gets or sets user configurable setting to display the environment type.",
          "oneOf": [
            {
              "enum": [
                "Production",
                "Unknown",
                "DevTest"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "performanceData": {
          "description": "Gets or sets the performance data.",
          "oneOf": [
            {
              "$ref": "#/definitions/PerformanceData"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "savingsSettings": {
          "description": "Gets or sets the savings settings.",
          "oneOf": [
            {
              "$ref": "#/definitions/SavingsSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "scalingFactor": {
          "description": "Percentage of buffer that user wants on performance metrics when recommending\nAzure sizes.",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "sizingCriterion": {
          "description": "Assessment sizing criterion.",
          "oneOf": [
            {
              "enum": [
                "PerformanceBased",
                "AsOnPremises"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "appSvcNativeSettings",
        "appSvcContainerSettings",
        "azureSecurityOfferingType"
      ],
      "type": "object"
    },
    "WebAppAssessmentV3Properties": {
      "description": "WebApp assessment resource properties.",
      "properties": {
        "details": {
          "description": "Gets or sets the details of the assessment.",
          "oneOf": [
            {
              "$ref": "#/definitions/AssessmentDetails"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "fallbackMachineAssessmentArmId": {
          "description": "Gets or sets the machine assessment ARM ID for VM fallback.",
          "type": "string"
        },
        "scope": {
          "description": "Gets or sets the scope of assessment.",
          "oneOf": [
            {
              "$ref": "#/definitions/Scope"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "settings": {
          "description": "Gets or sets the settings for the assessment.",
          "oneOf": [
            {
              "$ref": "#/definitions/WebAppAssessmentSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    }
  }
}