{
  "id": "https://schema.management.azure.com/schemas/2024-07-01/Microsoft.StorageMover.json#",
  "title": "Microsoft.StorageMover",
  "description": "Microsoft StorageMover Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "storageMovers_agents": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.StorageMover/storageMovers/agents"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/agents"
    },
    "storageMovers_endpoints": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.StorageMover/storageMovers/endpoints"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/EndpointBaseProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource specific properties for the Storage Mover resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/endpoints"
    },
    "storageMovers_projects_jobDefinitions": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.StorageMover/storageMovers/projects/jobDefinitions"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/JobDefinitionProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Job definition properties."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/storageMovers_projects_jobDefinitions_jobRuns_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/projects/jobDefinitions"
    },
    "storageMovers_projects": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.StorageMover/storageMovers/projects"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ProjectProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Project properties."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/storageMovers_projects_jobDefinitions_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/projects"
    },
    "storageMovers": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.StorageMover/storageMovers"
          ]
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/StorageMoverProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource specific properties for the Storage Mover resource."
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/storageMovers_agents_childResource"
              },
              {
                "$ref": "#/definitions/storageMovers_endpoints_childResource"
              },
              {
                "$ref": "#/definitions/storageMovers_projects_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers"
    }
  },
  "unknown_resourceDefinitions": {
    "storageMovers_projects_jobDefinitions_jobRuns": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.StorageMover/storageMovers/projects/jobDefinitions/jobRuns"
          ]
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type"
      ],
      "description": "Microsoft.StorageMover/storageMovers/projects/jobDefinitions/jobRuns"
    }
  },
  "definitions": {
    "AgentProperties": {
      "type": "object",
      "properties": {
        "arcResourceId": {
          "type": "string",
          "description": "The fully qualified resource ID of the Hybrid Compute resource for the Agent."
        },
        "arcVmUuid": {
          "type": "string",
          "description": "The VM UUID of the Hybrid Compute resource for the Agent."
        },
        "description": {
          "type": "string",
          "description": "A description for the Agent."
        },
        "uploadLimitSchedule": {
          "oneOf": [
            {
              "$ref": "#/definitions/UploadLimitSchedule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The WAN-link upload limit schedule that applies to any Job Run the agent executes. Data plane operations (migrating files) are affected. Control plane operations ensure seamless migration functionality and are not limited by this schedule. The schedule is interpreted with the agent's local time."
        }
      },
      "required": [
        "arcResourceId",
        "arcVmUuid"
      ]
    },
    "AzureKeyVaultSmbCredentials": {
      "type": "object",
      "properties": {
        "passwordUri": {
          "type": "string",
          "description": "The Azure Key Vault secret URI which stores the password. Use empty string to clean-up existing value."
        },
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AzureKeyVaultSmb"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Credentials type."
        },
        "usernameUri": {
          "type": "string",
          "description": "The Azure Key Vault secret URI which stores the username. Use empty string to clean-up existing value."
        }
      },
      "required": [
        "type"
      ]
    },
    "AzureStorageBlobContainerEndpointProperties": {
      "type": "object",
      "properties": {
        "blobContainerName": {
          "type": "string",
          "description": "The name of the Storage blob container that is the target destination."
        },
        "endpointType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AzureStorageBlobContainer"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Endpoint resource type."
        },
        "storageAccountResourceId": {
          "type": "string",
          "description": "The Azure Resource ID of the storage account that is the target destination."
        }
      },
      "required": [
        "blobContainerName",
        "endpointType",
        "storageAccountResourceId"
      ]
    },
    "AzureStorageSmbFileShareEndpointProperties": {
      "type": "object",
      "properties": {
        "endpointType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AzureStorageSmbFileShare"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Endpoint resource type."
        },
        "fileShareName": {
          "type": "string",
          "description": "The name of the Azure Storage file share."
        },
        "storageAccountResourceId": {
          "type": "string",
          "description": "The Azure Resource ID of the storage account."
        }
      },
      "required": [
        "endpointType",
        "fileShareName",
        "storageAccountResourceId"
      ]
    },
    "EndpointBaseProperties": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "description": {
              "type": "string",
              "description": "A description for the Endpoint."
            },
            "endpointType": {
              "type": "string",
              "enum": [
                "AzureStorageBlobContainer",
                "AzureStorageSmbFileShare",
                "NfsMount",
                "SmbMount"
              ]
            }
          },
          "required": [
            "endpointType"
          ],
          "additionalProperties": false
        },
        {
          "oneOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/AzureStorageBlobContainerEndpointProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "endpointType": {
                      "const": "AzureStorageBlobContainer"
                    }
                  },
                  "required": [
                    "endpointType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/AzureStorageSmbFileShareEndpointProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "endpointType": {
                      "const": "AzureStorageSmbFileShare"
                    }
                  },
                  "required": [
                    "endpointType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/NfsMountEndpointProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "endpointType": {
                      "const": "NfsMount"
                    }
                  },
                  "required": [
                    "endpointType"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/SmbMountEndpointProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "endpointType": {
                      "const": "SmbMount"
                    }
                  },
                  "required": [
                    "endpointType"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "JobDefinitionProperties": {
      "type": "object",
      "properties": {
        "agentName": {
          "type": "string",
          "description": "Name of the Agent to assign for new Job Runs of this Job Definition."
        },
        "copyMode": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Additive",
                "Mirror"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Strategy to use for copy."
        },
        "description": {
          "type": "string",
          "description": "A description for the Job Definition. OnPremToCloud is for migrating data from on-premises to cloud. CloudToCloud is for migrating data between cloud to cloud."
        },
        "sourceName": {
          "type": "string",
          "description": "The name of the source Endpoint."
        },
        "sourceSubpath": {
          "type": "string",
          "description": "The subpath to use when reading from the source Endpoint."
        },
        "targetName": {
          "type": "string",
          "description": "The name of the target Endpoint."
        },
        "targetSubpath": {
          "type": "string",
          "description": "The subpath to use when writing to the target Endpoint."
        }
      },
      "required": [
        "copyMode",
        "sourceName",
        "targetName"
      ]
    },
    "NfsMountEndpointProperties": {
      "type": "object",
      "properties": {
        "endpointType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "NfsMount"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Endpoint resource type."
        },
        "export": {
          "type": "string",
          "description": "The directory being exported from the server."
        },
        "host": {
          "type": "string",
          "description": "The host name or IP address of the server exporting the file system."
        },
        "nfsVersion": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "NFSauto",
                "NFSv3",
                "NFSv4"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The NFS protocol version."
        }
      },
      "required": [
        "endpointType",
        "export",
        "host"
      ]
    },
    "ProjectProperties": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string",
          "description": "A description for the Project."
        }
      }
    },
    "SmbMountEndpointProperties": {
      "type": "object",
      "properties": {
        "credentials": {
          "oneOf": [
            {
              "$ref": "#/definitions/AzureKeyVaultSmbCredentials"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Azure Key Vault secret URIs which store the required credentials to access the SMB share."
        },
        "endpointType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "SmbMount"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The Endpoint resource type."
        },
        "host": {
          "type": "string",
          "description": "The host name or IP address of the server exporting the file system."
        },
        "shareName": {
          "type": "string",
          "description": "The name of the SMB share being exported from the server."
        }
      },
      "required": [
        "endpointType",
        "host",
        "shareName"
      ]
    },
    "StorageMoverProperties": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string",
          "description": "A description for the Storage Mover."
        }
      }
    },
    "Time": {
      "type": "object",
      "properties": {
        "hour": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 24
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The hour element of the time. Allowed values range from 0 (start of the selected day) to 24 (end of the selected day). Hour value 24 cannot be combined with any other minute value but 0."
        },
        "minute": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The minute element of the time. Allowed values are 0 and 30. If not specified, its value defaults to 0."
        }
      },
      "required": [
        "hour"
      ]
    },
    "TrackedResourceTags": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string"
      }
    },
    "UploadLimitSchedule": {
      "type": "object",
      "properties": {
        "weeklyRecurrences": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/UploadLimitWeeklyRecurrence"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The set of weekly repeating recurrences of the WAN-link upload limit schedule."
        }
      }
    },
    "UploadLimitWeeklyRecurrence": {
      "type": "object",
      "properties": {
        "days": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "Monday",
                  "Tuesday",
                  "Wednesday",
                  "Thursday",
                  "Friday",
                  "Saturday",
                  "Sunday"
                ]
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The set of days of week for the schedule recurrence. A day must not be specified more than once in a recurrence."
        },
        "endTime": {
          "oneOf": [
            {
              "$ref": "#/definitions/Time"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The end time of the schedule recurrence. Full hour and 30-minute intervals are supported."
        },
        "limitInMbps": {
          "oneOf": [
            {
              "type": "integer",
              "maximum": 2147483647
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The WAN-link upload bandwidth (maximum data transfer rate) in megabits per second. Value of 0 indicates no throughput is allowed and any running migration job is effectively paused for the duration of this recurrence. Only data plane operations are governed by this limit. Control plane operations ensure seamless functionality. The agent may exceed this limit with control messages, if necessary."
        },
        "startTime": {
          "oneOf": [
            {
              "$ref": "#/definitions/Time"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The start time of the schedule recurrence. Full hour and 30-minute intervals are supported."
        }
      },
      "required": [
        "days",
        "endTime",
        "limitInMbps",
        "startTime"
      ]
    },
    "storageMovers_agents_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "agents"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AgentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/agents"
    },
    "storageMovers_endpoints_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "endpoints"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/EndpointBaseProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource specific properties for the Storage Mover resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/endpoints"
    },
    "storageMovers_projects_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "projects"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/ProjectProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Project properties."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/projects"
    },
    "storageMovers_projects_jobDefinitions_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "jobDefinitions"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/JobDefinitionProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Job definition properties."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.StorageMover/storageMovers/projects/jobDefinitions"
    },
    "storageMovers_projects_jobDefinitions_jobRuns_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2024-07-01"
          ]
        },
        "name": {
          "type": "string",
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "jobRuns"
          ]
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type"
      ],
      "description": "Microsoft.StorageMover/storageMovers/projects/jobDefinitions/jobRuns"
    }
  }
}