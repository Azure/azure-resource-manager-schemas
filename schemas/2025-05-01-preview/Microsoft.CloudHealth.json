{
  "id": "https://schema.management.azure.com/schemas/2025-05-01-preview/Microsoft.CloudHealth.json#",
  "title": "Microsoft.CloudHealth",
  "description": "Microsoft CloudHealth Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "healthmodels_authenticationsettings": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CloudHealth/healthmodels/authenticationsettings"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AuthenticationSettingProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/authenticationsettings"
    },
    "healthmodels_discoveryrules": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CloudHealth/healthmodels/discoveryrules"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/DiscoveryRuleProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/discoveryrules"
    },
    "healthmodels_entities": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CloudHealth/healthmodels/entities"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/EntityProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/entities"
    },
    "healthmodels_relationships": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CloudHealth/healthmodels/relationships"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/RelationshipProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/relationships"
    },
    "healthmodels_signaldefinitions": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CloudHealth/healthmodels/signaldefinitions"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/SignalDefinitionProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/signaldefinitions"
    },
    "healthmodels": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z][a-zA-Z0-9-]{1,42}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.CloudHealth/healthmodels"
          ]
        },
        "identity": {
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedServiceIdentity"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The managed service identities assigned to this resource."
        },
        "location": {
          "type": "string",
          "description": "The geo-location where the resource lives"
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/HealthModelProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        },
        "tags": {
          "oneOf": [
            {
              "$ref": "#/definitions/TrackedResourceTags"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource tags."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/healthmodels_authenticationsettings_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_discoveryrules_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_entities_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_relationships_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_signaldefinitions_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "location",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels"
    }
  },
  "definitions": {
    "AlertConfiguration": {
      "type": "object",
      "properties": {
        "actionGroupIds": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Optional list of action group resource IDs to be notified when the alert is triggered."
        },
        "description": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 1000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The alert rule description."
        },
        "severity": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Sev0",
                "Sev1",
                "Sev2",
                "Sev3",
                "Sev4"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The severity of triggered alert."
        }
      },
      "required": [
        "severity"
      ]
    },
    "AuthenticationSettingProperties": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "displayName": {
              "oneOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 260
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Display name"
            },
            "authenticationKind": {
              "type": "string",
              "enum": [
                "ManagedIdentity"
              ]
            }
          },
          "required": [
            "authenticationKind"
          ],
          "additionalProperties": false
        },
        {
          "oneOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/ManagedIdentityAuthenticationSettingProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "authenticationKind": {
                      "const": "ManagedIdentity"
                    }
                  },
                  "required": [
                    "authenticationKind"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "AzureMonitorWorkspaceSignalGroup": {
      "type": "object",
      "properties": {
        "authenticationSetting": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Reference to the name of the authentication setting which is used for querying the data source"
        },
        "azureMonitorWorkspaceResourceId": {
          "type": "string",
          "description": "Azure Monitor workspace resource ID"
        },
        "signalAssignments": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SignalAssignment"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Signal definitions which are assigned to this signal group. All assignments are combined with an OR operator."
        }
      },
      "required": [
        "authenticationSetting",
        "azureMonitorWorkspaceResourceId"
      ]
    },
    "AzureResourceSignalGroup": {
      "type": "object",
      "properties": {
        "authenticationSetting": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Reference to the name of the authentication setting which is used for querying the data source"
        },
        "azureResourceId": {
          "type": "string",
          "description": "Azure resource ID"
        },
        "signalAssignments": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SignalAssignment"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Signal definitions which are assigned to this signal group. All assignments are combined with an OR operator."
        }
      },
      "required": [
        "authenticationSetting",
        "azureResourceId"
      ]
    },
    "DependenciesSignalGroup": {
      "type": "object",
      "properties": {
        "aggregationType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "WorstOf",
                "Thresholds"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Aggregation type for child dependencies."
        },
        "degradedThreshold": {
          "type": "string",
          "description": "Degraded threshold for aggregating the propagated health state of child dependencies. Can be either an absolute number that is greater than 0, or a percentage between 1-100%. The entity will be considered degraded when the number of not healthy child dependents (unhealthy, degraded, unknown) is equal to or above the threshold value. Must only be set when AggregationType is 'Thresholds'."
        },
        "unhealthyThreshold": {
          "type": "string",
          "description": "Unhealthy threshold for aggregating the propagated health state of child dependencies. Can be either an absolute number that is greater than 0, or a percentage between 1-100%. The entity will be considered unhealthy when the number of not healthy child dependents (unhealthy, degraded, unknown) is equal to or above the threshold value. Must only be set when AggregationType is 'Thresholds'."
        }
      },
      "required": [
        "aggregationType"
      ]
    },
    "DiscoveryRuleProperties": {
      "type": "object",
      "properties": {
        "addRecommendedSignals": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Enabled",
                "Disabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Whether to add all recommended signals to the discovered entities."
        },
        "authenticationSetting": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Reference to the name of the authentication setting which is used for querying Azure Resource Graph. The same authentication setting will also be assigned to any discovered entities."
        },
        "discoverRelationships": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Enabled",
                "Disabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Whether to create relationships between the discovered entities based on a set of built-in rules. These relationships cannot be manually deleted."
        },
        "displayName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 260
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Display name"
        },
        "resourceGraphQuery": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 5000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Azure Resource Graph query text in KQL syntax. The query must return at least a column named 'id' which contains the resource ID of the discovered resources."
        }
      },
      "required": [
        "addRecommendedSignals",
        "authenticationSetting",
        "discoverRelationships",
        "resourceGraphQuery"
      ]
    },
    "DynamicDetectionRule": {
      "type": "object",
      "properties": {
        "dynamicThresholdDirection": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "LowerThan",
                "GreaterThan",
                "GreaterOrLowerThan"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Threshold direction"
        },
        "dynamicThresholdModel": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AnomalyDetection"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "ML model to use for dynamic thresholds"
        },
        "modelSensitivity": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 5
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "ML model sensitivity. Lowest value = high sensitivity. Supported step size = 0.5"
        },
        "trainingStartTime": {
          "type": "string",
          "description": "Start time of the training in UTC."
        }
      },
      "required": [
        "dynamicThresholdDirection",
        "dynamicThresholdModel",
        "modelSensitivity"
      ]
    },
    "EntityAlerts": {
      "type": "object",
      "properties": {
        "degraded": {
          "oneOf": [
            {
              "$ref": "#/definitions/AlertConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Alert to be triggered on state change to degraded"
        },
        "unhealthy": {
          "oneOf": [
            {
              "$ref": "#/definitions/AlertConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Alert to be triggered on state change to unhealthy"
        }
      }
    },
    "EntityCoordinates": {
      "type": "object",
      "properties": {
        "x": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "X Coordinate"
        },
        "y": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Y Coordinate"
        }
      },
      "required": [
        "x",
        "y"
      ]
    },
    "EntityProperties": {
      "type": "object",
      "properties": {
        "alerts": {
          "oneOf": [
            {
              "$ref": "#/definitions/EntityAlerts"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Alert configuration for this entity"
        },
        "canvasPosition": {
          "oneOf": [
            {
              "$ref": "#/definitions/EntityCoordinates"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Positioning of the entity on the model canvas"
        },
        "displayName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 260
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Display name"
        },
        "healthObjective": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Health objective as a percentage of time the entity should be healthy."
        },
        "icon": {
          "oneOf": [
            {
              "$ref": "#/definitions/IconDefinition"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Visual icon definition. If not set, a default icon is used."
        },
        "impact": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Standard",
                "Limited",
                "Suppressed"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Impact of the entity in health state propagation"
        },
        "kind": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 260
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Entity kind"
        },
        "labels": {
          "oneOf": [
            {
              "$ref": "#/definitions/EntityPropertiesLabels"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Optional set of labels (key-value pairs)"
        },
        "signals": {
          "oneOf": [
            {
              "$ref": "#/definitions/SignalGroup"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Signal groups which are assigned to this entity"
        }
      }
    },
    "EntityPropertiesLabels": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string",
        "maxLength": 4096
      }
    },
    "EvaluationRule": {
      "type": "object",
      "properties": {
        "degradedRule": {
          "oneOf": [
            {
              "$ref": "#/definitions/ThresholdRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Degraded rule with static threshold. When used, dynamicDetectionRule must not be set."
        },
        "dynamicDetectionRule": {
          "oneOf": [
            {
              "$ref": "#/definitions/DynamicDetectionRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Configure to use ML-based dynamic thresholds. When used, degradedRule and unhealthyRule must not be set."
        },
        "unhealthyRule": {
          "oneOf": [
            {
              "$ref": "#/definitions/ThresholdRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Unhealthy rule with static threshold. When used, dynamicDetectionRule must not be set."
        }
      }
    },
    "HealthModelProperties": {
      "type": "object",
      "properties": {
        "discovery": {
          "oneOf": [
            {
              "$ref": "#/definitions/ModelDiscoverySettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Configure to automatically discover entities from a given scope, such as a Service Group. The discovered entities will be linked to the root entity of the health model."
        }
      }
    },
    "IconDefinition": {
      "type": "object",
      "properties": {
        "customData": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 5000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Custom data. Base64-encoded SVG data. If set, this overrides the built-in icon."
        },
        "iconName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Name of the built-in icon, or 'Custom' to use customData"
        }
      },
      "required": [
        "iconName"
      ]
    },
    "LogAnalyticsQuerySignalDefinitionProperties": {
      "type": "object",
      "properties": {
        "queryText": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 5000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Query text in KQL syntax"
        },
        "signalKind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "LogAnalyticsQuery"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Kind of the signal definition"
        },
        "timeGrain": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Time range of signal. ISO duration format like PT10M. If not specified, the KQL query must define a time range."
        },
        "valueColumnName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Name of the column in the result set to evaluate against the thresholds. Defaults to the first column in the result set if not specified. The column must be numeric."
        }
      },
      "required": [
        "queryText",
        "signalKind"
      ]
    },
    "LogAnalyticsSignalGroup": {
      "type": "object",
      "properties": {
        "authenticationSetting": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Reference to the name of the authentication setting which is used for querying the data source"
        },
        "logAnalyticsWorkspaceResourceId": {
          "type": "string",
          "description": "Log Analytics Workspace resource ID"
        },
        "signalAssignments": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SignalAssignment"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Signal definitions which are assigned to this signal group. All assignments are combined with an OR operator."
        }
      },
      "required": [
        "authenticationSetting",
        "logAnalyticsWorkspaceResourceId"
      ]
    },
    "ManagedIdentityAuthenticationSettingProperties": {
      "type": "object",
      "properties": {
        "authenticationKind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "ManagedIdentity"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Kind of the authentication setting"
        },
        "managedIdentityName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 500
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Name of the managed identity to use. Either 'SystemAssigned' or the resourceId of a user-assigned identity."
        }
      },
      "required": [
        "authenticationKind",
        "managedIdentityName"
      ]
    },
    "ManagedServiceIdentity": {
      "type": "object",
      "properties": {
        "type": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "SystemAssigned",
                "UserAssigned",
                "SystemAssigned,UserAssigned"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed)."
        },
        "userAssignedIdentities": {
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedServiceIdentityUserAssignedIdentities"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The set of user assigned identities associated with the resource. The userAssignedIdentities dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}. The dictionary values can be empty objects ({}) in requests."
        }
      },
      "required": [
        "type"
      ]
    },
    "ManagedServiceIdentityUserAssignedIdentities": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "$ref": "#/definitions/UserAssignedIdentity"
      }
    },
    "ModelDiscoverySettings": {
      "type": "object",
      "properties": {
        "addRecommendedSignals": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "Enabled",
                "Disabled"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Whether to add all recommended signals to the discovered entities."
        },
        "identity": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 4096
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Which Managed Identity of the health model to use for discovery. Defaults to SystemAssigned, if not set. Can be set to 'SystemAssigned' or to the resource id of a user-assigned managed identity which is linked to the health model."
        },
        "scope": {
          "oneOf": [
            {
              "type": "string",
              "maxLength": 4096
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The scope from which entities should be automatically discovered. For example, the resource id of a Service Group."
        }
      },
      "required": [
        "addRecommendedSignals",
        "scope"
      ]
    },
    "PrometheusMetricsSignalDefinitionProperties": {
      "type": "object",
      "properties": {
        "queryText": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 5000
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Query text in PromQL syntax"
        },
        "signalKind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "PrometheusMetricsQuery"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Kind of the signal definition"
        },
        "timeGrain": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Time range of signal. ISO duration format like PT10M."
        }
      },
      "required": [
        "queryText",
        "signalKind"
      ]
    },
    "RelationshipProperties": {
      "type": "object",
      "properties": {
        "childEntityName": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource name of the child entity"
        },
        "displayName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 260
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Display name"
        },
        "labels": {
          "oneOf": [
            {
              "$ref": "#/definitions/RelationshipPropertiesLabels"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Optional set of labels (key-value pairs)"
        },
        "parentEntityName": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Resource name of the parent entity"
        }
      },
      "required": [
        "childEntityName",
        "parentEntityName"
      ]
    },
    "RelationshipPropertiesLabels": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string",
        "maxLength": 4096
      }
    },
    "ResourceMetricSignalDefinitionProperties": {
      "type": "object",
      "properties": {
        "aggregationType": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "Average",
                "Count",
                "Minimum",
                "Maximum",
                "Total"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Type of aggregation to apply to the metric"
        },
        "dimension": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Optional: Dimension to split by"
        },
        "dimensionFilter": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Optional: Dimension filter to apply to the dimension. Must only be set if also Dimension is set."
        },
        "metricName": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Name of the metric"
        },
        "metricNamespace": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Metric namespace"
        },
        "signalKind": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "AzureResourceMetric"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Kind of the signal definition"
        },
        "timeGrain": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Time range of signal. ISO duration format like PT10M."
        }
      },
      "required": [
        "aggregationType",
        "metricName",
        "metricNamespace",
        "signalKind",
        "timeGrain"
      ]
    },
    "SignalAssignment": {
      "type": "object",
      "properties": {
        "signalDefinitions": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Signal definitions referenced by their names. All definitions are combined with an AND operator."
        }
      },
      "required": [
        "signalDefinitions"
      ]
    },
    "SignalDefinitionProperties": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "dataUnit": {
              "oneOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 100
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Unit of the signal result (e.g. Bytes, MilliSeconds, Percent, Count))"
            },
            "displayName": {
              "oneOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 260
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Display name"
            },
            "evaluationRules": {
              "oneOf": [
                {
                  "$ref": "#/definitions/EvaluationRule"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Evaluation rules for the signal definition"
            },
            "labels": {
              "oneOf": [
                {
                  "$ref": "#/definitions/SignalDefinitionPropertiesLabels"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Optional set of labels (key-value pairs)"
            },
            "refreshInterval": {
              "oneOf": [
                {
                  "type": "string",
                  "enum": [
                    "PT1M",
                    "PT5M",
                    "PT10M",
                    "PT30M",
                    "PT1H",
                    "PT2H"
                  ]
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ],
              "description": "Interval in which the signal is being evaluated. Defaults to PT1M (1 minute)."
            },
            "signalKind": {
              "type": "string",
              "enum": [
                "AzureResourceMetric",
                "LogAnalyticsQuery",
                "PrometheusMetricsQuery"
              ]
            }
          },
          "required": [
            "evaluationRules",
            "signalKind"
          ],
          "additionalProperties": false
        },
        {
          "oneOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/ResourceMetricSignalDefinitionProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "signalKind": {
                      "const": "AzureResourceMetric"
                    }
                  },
                  "required": [
                    "signalKind"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/LogAnalyticsQuerySignalDefinitionProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "signalKind": {
                      "const": "LogAnalyticsQuery"
                    }
                  },
                  "required": [
                    "signalKind"
                  ]
                }
              ]
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/PrometheusMetricsSignalDefinitionProperties"
                },
                {
                  "type": "object",
                  "properties": {
                    "signalKind": {
                      "const": "PrometheusMetricsQuery"
                    }
                  },
                  "required": [
                    "signalKind"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "SignalDefinitionPropertiesLabels": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string",
        "maxLength": 4096
      }
    },
    "SignalGroup": {
      "type": "object",
      "properties": {
        "azureLogAnalytics": {
          "oneOf": [
            {
              "$ref": "#/definitions/LogAnalyticsSignalGroup"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Log Analytics Signal Group"
        },
        "azureMonitorWorkspace": {
          "oneOf": [
            {
              "$ref": "#/definitions/AzureMonitorWorkspaceSignalGroup"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Azure Monitor Workspace Signal Group"
        },
        "azureResource": {
          "oneOf": [
            {
              "$ref": "#/definitions/AzureResourceSignalGroup"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Azure Resource Signal Group"
        },
        "dependencies": {
          "oneOf": [
            {
              "$ref": "#/definitions/DependenciesSignalGroup"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Settings for dependency signals to control how the health state of child entities influences the health state of the parent entity."
        }
      }
    },
    "ThresholdRule": {
      "type": "object",
      "properties": {
        "operator": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "LowerThan",
                "LowerOrEquals",
                "GreaterThan",
                "GreaterOrEquals",
                "Equals"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Operator how to compare the signal value with the threshold"
        },
        "threshold": {
          "oneOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "Threshold value"
        }
      },
      "required": [
        "operator",
        "threshold"
      ]
    },
    "TrackedResourceTags": {
      "type": "object",
      "properties": {},
      "additionalProperties": {
        "type": "string"
      }
    },
    "UserAssignedIdentity": {
      "type": "object",
      "properties": {}
    },
    "healthmodels_authenticationsettings_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "authenticationsettings"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AuthenticationSettingProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/authenticationsettings"
    },
    "healthmodels_discoveryrules_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "discoveryrules"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/DiscoveryRuleProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/discoveryrules"
    },
    "healthmodels_entities_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "entities"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/EntityProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/entities"
    },
    "healthmodels_relationships_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "relationships"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/RelationshipProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/relationships"
    },
    "healthmodels_signaldefinitions_childResource": {
      "type": "object",
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "2025-05-01-preview"
          ]
        },
        "name": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource name"
        },
        "type": {
          "type": "string",
          "enum": [
            "signaldefinitions"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/SignalDefinitionProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ],
          "description": "The resource-specific properties for this resource."
        }
      },
      "required": [
        "name",
        "apiVersion",
        "type",
        "properties"
      ],
      "description": "Microsoft.CloudHealth/healthmodels/signaldefinitions"
    }
  }
}