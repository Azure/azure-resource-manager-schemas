{
  "id": "https://schema.management.azure.com/schemas/2026-01-01-preview/Microsoft.CloudHealth.json#",
  "title": "Microsoft.CloudHealth",
  "description": "Microsoft CloudHealth Resource Types",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "resourceDefinitions": {
    "healthmodels": {
      "description": "Microsoft.CloudHealth/healthmodels",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "identity": {
          "description": "The managed service identities assigned to this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedServiceIdentity"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "location": {
          "description": "The geo-location where the resource lives",
          "type": "string"
        },
        "name": {
          "description": "Name of health model resource",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z][a-zA-Z0-9-]{1,42}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/HealthModelProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "resources": {
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/healthmodels_entities_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_relationships_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_discoveryrules_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_signaldefinitions_childResource"
              },
              {
                "$ref": "#/definitions/healthmodels_authenticationsettings_childResource"
              }
            ]
          },
          "type": "array"
        },
        "tags": {
          "description": "Resource tags.",
          "oneOf": [
            {
              "additionalProperties": {
                "type": "string"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.CloudHealth/healthmodels"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_authenticationsettings": {
      "description": "Microsoft.CloudHealth/healthmodels/authenticationsettings",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the authentication setting. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/AuthenticationSettingProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.CloudHealth/healthmodels/authenticationsettings"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_discoveryrules": {
      "description": "Microsoft.CloudHealth/healthmodels/discoveryrules",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the discovery rule. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/DiscoveryRuleProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.CloudHealth/healthmodels/discoveryrules"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_entities": {
      "description": "Microsoft.CloudHealth/healthmodels/entities",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the entity. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/EntityProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.CloudHealth/healthmodels/entities"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_relationships": {
      "description": "Microsoft.CloudHealth/healthmodels/relationships",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the relationship. Must be unique within a health model. For example, a concatenation of parentEntityName and childEntityName can be used as the name.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/RelationshipProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.CloudHealth/healthmodels/relationships"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_signaldefinitions": {
      "description": "Microsoft.CloudHealth/healthmodels/signaldefinitions",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the signal definition. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/SignalDefinitionProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "Microsoft.CloudHealth/healthmodels/signaldefinitions"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    }
  },
  "definitions": {
    "AlertConfiguration": {
      "description": "Alert configuration details",
      "properties": {
        "actionGroupIds": {
          "description": "Optional list of action group resource IDs to be notified when the alert is triggered.",
          "oneOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "description": {
          "description": "The alert rule description.",
          "maxLength": 1000,
          "minLength": 1,
          "type": "string"
        },
        "severity": {
          "description": "The severity of triggered alert.",
          "oneOf": [
            {
              "enum": [
                "Sev0",
                "Sev1",
                "Sev2",
                "Sev3",
                "Sev4"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "severity"
      ],
      "type": "object"
    },
    "AuthenticationSettingProperties": {
      "description": "Authentication setting properties",
      "oneOf": [
        {
          "description": "Authentication setting properties for Azure Managed Identity",
          "properties": {
            "authenticationKind": {
              "enum": [
                "ManagedIdentity"
              ],
              "type": "string"
            },
            "managedIdentityName": {
              "description": "Name of the managed identity to use. Either 'SystemAssigned' or the resourceId of a user-assigned identity.",
              "maxLength": 500,
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "managedIdentityName",
            "authenticationKind"
          ],
          "type": "object"
        }
      ],
      "properties": {
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        }
      },
      "type": "object"
    },
    "AzureMonitorWorkspaceSignals": {
      "description": "A grouping of Azure Monitor workspace signals.",
      "properties": {
        "authenticationSetting": {
          "description": "Reference to the name of the authentication setting which is used for querying the data source.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "azureMonitorWorkspaceResourceId": {
          "description": "Azure Monitor workspace resource ID.",
          "type": "string"
        },
        "signals": {
          "description": "Signals assigned to this signal group.",
          "oneOf": [
            {
              "items": {
                "$ref": "#/definitions/PrometheusMetricsSignal"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "authenticationSetting",
        "azureMonitorWorkspaceResourceId"
      ],
      "type": "object"
    },
    "AzureResourceSignal": {
      "description": "An Azure Resource Metric signal instance assigned to an entity.",
      "properties": {
        "aggregationType": {
          "description": "Type of aggregation to apply to the metric",
          "oneOf": [
            {
              "enum": [
                "None",
                "Average",
                "Count",
                "Minimum",
                "Maximum",
                "Total"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "dataUnit": {
          "description": "Unit of the signal result (e.g. Bytes, MilliSeconds, Percent, Count))",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        },
        "dimension": {
          "description": "Optional: Dimension to split by",
          "maxLength": 256,
          "minLength": 1,
          "type": "string"
        },
        "dimensionFilter": {
          "description": "Optional: Dimension filter to apply to the dimension. Must only be set if also Dimension is set.",
          "maxLength": 256,
          "minLength": 1,
          "type": "string"
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "evaluationRules": {
          "description": "Evaluation rules for the signal definition",
          "oneOf": [
            {
              "$ref": "#/definitions/EvaluationRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "metricName": {
          "description": "Name of the metric",
          "maxLength": 256,
          "minLength": 1,
          "type": "string"
        },
        "metricNamespace": {
          "description": "Metric namespace",
          "maxLength": 256,
          "minLength": 1,
          "type": "string"
        },
        "name": {
          "description": "Unique name of the signal within the entity.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "refreshInterval": {
          "description": "Interval in which the signal is being evaluated. Defaults to PT1M (1 minute).",
          "oneOf": [
            {
              "enum": [
                "PT1M",
                "PT5M",
                "PT10M",
                "PT30M",
                "PT1H",
                "PT2H"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalDefinitionName": {
          "description": "Optional reference to a signal definition that provides default values.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalKind": {
          "description": "Kind of the signal instance",
          "oneOf": [
            {
              "enum": [
                "AzureResourceMetric",
                "LogAnalyticsQuery",
                "PrometheusMetricsQuery",
                "External"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "timeGrain": {
          "description": "Time range of signal. ISO duration format like PT10M.",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        }
      },
      "required": [
        "signalKind",
        "name"
      ],
      "type": "object"
    },
    "AzureResourceSignals": {
      "description": "A grouping of Azure resource signals",
      "properties": {
        "authenticationSetting": {
          "description": "Reference to the name of the authentication setting which is used for querying the data source.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "azureResourceId": {
          "description": "Azure resource ID",
          "type": "string"
        },
        "azureResourceKind": {
          "description": "Azure resource kind (e.g., 'functionapp'). Populated by the UI for icon rendering. Can be null if not populated.",
          "maxLength": 256,
          "type": "string"
        },
        "signals": {
          "description": "Signals assigned to this group.",
          "oneOf": [
            {
              "items": {
                "$ref": "#/definitions/AzureResourceSignal"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "authenticationSetting",
        "azureResourceId"
      ],
      "type": "object"
    },
    "DependenciesSignalGroup": {
      "description": "Properties for dependent entities, i.e. child entities",
      "properties": {
        "aggregationType": {
          "description": "Aggregation type for child dependencies.",
          "oneOf": [
            {
              "enum": [
                "WorstOf",
                "Thresholds"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "degradedThreshold": {
          "description": "Degraded threshold for aggregating the propagated health state of child dependencies. Can be either an absolute number that is greater than 0, or a percentage between 1-100%. The entity will be considered degraded when the number of not healthy child dependents (unhealthy, degraded, unknown) is equal to or above the threshold value. Must only be set when AggregationType is 'Thresholds'.",
          "type": "string"
        },
        "unhealthyThreshold": {
          "description": "Unhealthy threshold for aggregating the propagated health state of child dependencies. Can be either an absolute number that is greater than 0, or a percentage between 1-100%. The entity will be considered unhealthy when the number of not healthy child dependents (unhealthy, degraded, unknown) is equal to or above the threshold value. Must only be set when AggregationType is 'Thresholds'.",
          "type": "string"
        }
      },
      "required": [
        "aggregationType"
      ],
      "type": "object"
    },
    "DiscoveryRuleProperties": {
      "description": "Discovery rule properties",
      "properties": {
        "addRecommendedSignals": {
          "description": "Whether to add all recommended signals to the discovered entities.",
          "oneOf": [
            {
              "enum": [
                "Enabled",
                "Disabled"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "authenticationSetting": {
          "description": "Reference to the name of the authentication setting which is used for querying Azure Resource Graph. The same authentication setting will also be assigned to any discovered entities.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "discoverRelationships": {
          "description": "Whether to create relationships between the discovered entities based on a set of built-in rules. These relationships cannot be manually deleted.",
          "oneOf": [
            {
              "enum": [
                "Enabled",
                "Disabled"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "specification": {
          "description": "Specification of the discovery rule defining how entities are discovered.",
          "oneOf": [
            {
              "$ref": "#/definitions/DiscoveryRuleSpecification"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "authenticationSetting",
        "discoverRelationships",
        "addRecommendedSignals",
        "specification"
      ],
      "type": "object"
    },
    "DiscoveryRuleSpecification": {
      "description": "Base model for discovery rule specifications",
      "oneOf": [
        {
          "description": "Discovery rule specification for an Application Insights topology query",
          "properties": {
            "applicationInsightsResourceId": {
              "description": "Application Insights resource ID",
              "type": "string"
            },
            "kind": {
              "enum": [
                "ApplicationInsightsTopology"
              ],
              "type": "string"
            }
          },
          "required": [
            "applicationInsightsResourceId",
            "kind"
          ],
          "type": "object"
        },
        {
          "description": "Discovery rule specification for an Azure Resource Graph query",
          "properties": {
            "kind": {
              "enum": [
                "ResourceGraphQuery"
              ],
              "type": "string"
            },
            "resourceGraphQuery": {
              "description": "Azure Resource Graph query text in KQL syntax. The query must return at least a column named 'id' which contains the resource ID of the discovered resources.",
              "maxLength": 5000,
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "resourceGraphQuery",
            "kind"
          ],
          "type": "object"
        }
      ],
      "properties": {},
      "type": "object"
    },
    "EntityAlerts": {
      "description": "Alert configuration for an entity",
      "properties": {
        "degraded": {
          "description": "Alert to be triggered on state change to degraded",
          "oneOf": [
            {
              "$ref": "#/definitions/AlertConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "unhealthy": {
          "description": "Alert to be triggered on state change to unhealthy",
          "oneOf": [
            {
              "$ref": "#/definitions/AlertConfiguration"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "EntityCoordinates": {
      "description": "Visual position of the entity",
      "properties": {
        "x": {
          "description": "X Coordinate",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "y": {
          "description": "Y Coordinate",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "x",
        "y"
      ],
      "type": "object"
    },
    "EntityProperties": {
      "description": "Properties which are common across all kinds of entities",
      "properties": {
        "alerts": {
          "description": "Alert configuration for this entity",
          "oneOf": [
            {
              "$ref": "#/definitions/EntityAlerts"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "canvasPosition": {
          "description": "Positioning of the entity on the model canvas",
          "oneOf": [
            {
              "$ref": "#/definitions/EntityCoordinates"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "healthObjective": {
          "description": "Health objective as a percentage of time the entity should be healthy.",
          "oneOf": [
            {
              "maximum": 100,
              "minimum": 0,
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "icon": {
          "description": "Visual icon definition. If not set, a default icon is used.",
          "oneOf": [
            {
              "$ref": "#/definitions/IconDefinition"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "impact": {
          "description": "Impact of the entity in health state propagation",
          "oneOf": [
            {
              "enum": [
                "Standard",
                "Limited",
                "Suppressed"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalGroups": {
          "description": "Signal groups which are assigned to this entity",
          "oneOf": [
            {
              "$ref": "#/definitions/SignalGroups"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "tags": {
          "description": "Optional set of tags (key-value pairs)",
          "oneOf": [
            {
              "additionalProperties": {
                "maxLength": 4096,
                "type": "string"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "EvaluationRule": {
      "description": "Evaluation rule for a signal definition",
      "properties": {
        "degradedRule": {
          "description": "Degraded rule with static threshold.",
          "oneOf": [
            {
              "$ref": "#/definitions/ThresholdRuleV2"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "unhealthyRule": {
          "description": "Unhealthy rule with static threshold.",
          "oneOf": [
            {
              "$ref": "#/definitions/ThresholdRuleV2"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "unhealthyRule"
      ],
      "type": "object"
    },
    "HealthModelProperties": {
      "description": "HealthModel properties",
      "properties": {},
      "type": "object"
    },
    "IconDefinition": {
      "description": "Visual icon definition of an entity",
      "properties": {
        "customData": {
          "description": "Custom data. Base64-encoded SVG data. If set, this overrides the built-in icon.",
          "maxLength": 5000,
          "minLength": 1,
          "type": "string"
        },
        "iconName": {
          "description": "Name of the built-in icon, or 'Custom' to use customData",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        }
      },
      "required": [
        "iconName"
      ],
      "type": "object"
    },
    "LogAnalyticsSignal": {
      "description": "A Log Analytics Query signal instance assigned to an entity.",
      "properties": {
        "dataUnit": {
          "description": "Unit of the signal result (e.g. Bytes, MilliSeconds, Percent, Count))",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "evaluationRules": {
          "description": "Evaluation rules for the signal definition",
          "oneOf": [
            {
              "$ref": "#/definitions/EvaluationRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "name": {
          "description": "Unique name of the signal within the entity.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "queryText": {
          "description": "Query text in KQL syntax",
          "maxLength": 5000,
          "minLength": 1,
          "type": "string"
        },
        "refreshInterval": {
          "description": "Interval in which the signal is being evaluated. Defaults to PT1M (1 minute).",
          "oneOf": [
            {
              "enum": [
                "PT1M",
                "PT5M",
                "PT10M",
                "PT30M",
                "PT1H",
                "PT2H"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalDefinitionName": {
          "description": "Optional reference to a signal definition that provides default values.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalKind": {
          "description": "Kind of the signal instance",
          "oneOf": [
            {
              "enum": [
                "AzureResourceMetric",
                "LogAnalyticsQuery",
                "PrometheusMetricsQuery",
                "External"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "timeGrain": {
          "description": "Time range of signal. ISO duration format like PT10M. If not specified, the KQL query must define a time range.",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        },
        "valueColumnName": {
          "description": "Name of the column in the result set to evaluate against the thresholds. Defaults to the first column in the result set if not specified. The column must be numeric.",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        }
      },
      "required": [
        "signalKind",
        "name"
      ],
      "type": "object"
    },
    "LogAnalyticsSignals": {
      "description": "A grouping of Log Analytics workspace signals.",
      "properties": {
        "authenticationSetting": {
          "description": "Reference to the name of the authentication setting which is used for querying the data source.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "logAnalyticsWorkspaceResourceId": {
          "description": "Log Analytics workspace resource ID.",
          "type": "string"
        },
        "signals": {
          "description": "Signals assigned to this group.",
          "oneOf": [
            {
              "items": {
                "$ref": "#/definitions/LogAnalyticsSignal"
              },
              "type": "array"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "authenticationSetting",
        "logAnalyticsWorkspaceResourceId"
      ],
      "type": "object"
    },
    "ManagedServiceIdentity": {
      "description": "Managed service identity (system assigned and/or user assigned identities)",
      "properties": {
        "type": {
          "description": "Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed).",
          "oneOf": [
            {
              "enum": [
                "None",
                "SystemAssigned",
                "UserAssigned",
                "SystemAssigned,UserAssigned"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "userAssignedIdentities": {
          "description": "The set of user assigned identities associated with the resource. The userAssignedIdentities dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}. The dictionary values can be empty objects ({}) in requests.",
          "oneOf": [
            {
              "additionalProperties": {
                "$ref": "#/definitions/UserAssignedIdentity"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "type"
      ],
      "type": "object"
    },
    "PrometheusMetricsSignal": {
      "description": "A Prometheus Metrics Query signal instance assigned to an entity.",
      "properties": {
        "dataUnit": {
          "description": "Unit of the signal result (e.g. Bytes, MilliSeconds, Percent, Count))",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "evaluationRules": {
          "description": "Evaluation rules for the signal definition",
          "oneOf": [
            {
              "$ref": "#/definitions/EvaluationRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "name": {
          "description": "Unique name of the signal within the entity.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "queryText": {
          "description": "Query text in PromQL syntax",
          "maxLength": 5000,
          "minLength": 1,
          "type": "string"
        },
        "refreshInterval": {
          "description": "Interval in which the signal is being evaluated. Defaults to PT1M (1 minute).",
          "oneOf": [
            {
              "enum": [
                "PT1M",
                "PT5M",
                "PT10M",
                "PT30M",
                "PT1H",
                "PT2H"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalDefinitionName": {
          "description": "Optional reference to a signal definition that provides default values.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "signalKind": {
          "description": "Kind of the signal instance",
          "oneOf": [
            {
              "enum": [
                "AzureResourceMetric",
                "LogAnalyticsQuery",
                "PrometheusMetricsQuery",
                "External"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "timeGrain": {
          "description": "Time range of signal. ISO duration format like PT10M.",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        }
      },
      "required": [
        "signalKind",
        "name"
      ],
      "type": "object"
    },
    "RelationshipProperties": {
      "description": "Relationship properties",
      "properties": {
        "childEntityName": {
          "description": "Resource name of the child entity",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "parentEntityName": {
          "description": "Resource name of the parent entity",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "tags": {
          "description": "Optional set of tags (key-value pairs)",
          "oneOf": [
            {
              "additionalProperties": {
                "maxLength": 4096,
                "type": "string"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "parentEntityName",
        "childEntityName"
      ],
      "type": "object"
    },
    "SignalDefinitionProperties": {
      "description": "SignalDefinition properties",
      "oneOf": [
        {
          "description": "Azure Resource Metric Signal Definition properties",
          "properties": {
            "aggregationType": {
              "description": "Type of aggregation to apply to the metric",
              "oneOf": [
                {
                  "enum": [
                    "None",
                    "Average",
                    "Count",
                    "Minimum",
                    "Maximum",
                    "Total"
                  ],
                  "type": "string"
                },
                {
                  "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
                }
              ]
            },
            "dimension": {
              "description": "Optional: Dimension to split by",
              "maxLength": 256,
              "minLength": 1,
              "type": "string"
            },
            "dimensionFilter": {
              "description": "Optional: Dimension filter to apply to the dimension. Must only be set if also Dimension is set.",
              "maxLength": 256,
              "minLength": 1,
              "type": "string"
            },
            "metricName": {
              "description": "Name of the metric",
              "maxLength": 256,
              "minLength": 1,
              "type": "string"
            },
            "metricNamespace": {
              "description": "Metric namespace",
              "maxLength": 256,
              "minLength": 1,
              "type": "string"
            },
            "signalKind": {
              "enum": [
                "AzureResourceMetric"
              ],
              "type": "string"
            },
            "timeGrain": {
              "description": "Time range of signal. ISO duration format like PT10M.",
              "maxLength": 100,
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "metricNamespace",
            "metricName",
            "timeGrain",
            "aggregationType",
            "signalKind"
          ],
          "type": "object"
        },
        {
          "description": "Log Analytics Query Signal Definition properties",
          "properties": {
            "queryText": {
              "description": "Query text in KQL syntax",
              "maxLength": 5000,
              "minLength": 1,
              "type": "string"
            },
            "signalKind": {
              "enum": [
                "LogAnalyticsQuery"
              ],
              "type": "string"
            },
            "timeGrain": {
              "description": "Time range of signal. ISO duration format like PT10M. If not specified, the KQL query must define a time range.",
              "maxLength": 100,
              "minLength": 1,
              "type": "string"
            },
            "valueColumnName": {
              "description": "Name of the column in the result set to evaluate against the thresholds. Defaults to the first column in the result set if not specified. The column must be numeric.",
              "maxLength": 100,
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "queryText",
            "signalKind"
          ],
          "type": "object"
        },
        {
          "description": "Prometheus Metrics Signal Definition properties",
          "properties": {
            "queryText": {
              "description": "Query text in PromQL syntax",
              "maxLength": 5000,
              "minLength": 1,
              "type": "string"
            },
            "signalKind": {
              "enum": [
                "PrometheusMetricsQuery"
              ],
              "type": "string"
            },
            "timeGrain": {
              "description": "Time range of signal. ISO duration format like PT10M.",
              "maxLength": 100,
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "queryText",
            "signalKind"
          ],
          "type": "object"
        }
      ],
      "properties": {
        "dataUnit": {
          "description": "Unit of the signal result (e.g. Bytes, MilliSeconds, Percent, Count))",
          "maxLength": 100,
          "minLength": 1,
          "type": "string"
        },
        "displayName": {
          "description": "Display name",
          "maxLength": 260,
          "minLength": 1,
          "type": "string"
        },
        "evaluationRules": {
          "description": "Evaluation rules for the signal definition",
          "oneOf": [
            {
              "$ref": "#/definitions/EvaluationRule"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "refreshInterval": {
          "description": "Interval in which the signal is being evaluated. Defaults to PT1M (1 minute).",
          "oneOf": [
            {
              "enum": [
                "PT1M",
                "PT5M",
                "PT10M",
                "PT30M",
                "PT1H",
                "PT2H"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "tags": {
          "description": "Optional set of tags (key-value pairs)",
          "oneOf": [
            {
              "additionalProperties": {
                "maxLength": 4096,
                "type": "string"
              },
              "properties": {},
              "type": "object"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "evaluationRules"
      ],
      "type": "object"
    },
    "SignalGroups": {
      "description": "Contains various signal groups that can be assigned to an entity",
      "properties": {
        "azureLogAnalytics": {
          "description": "Log Analytics Signal Group",
          "oneOf": [
            {
              "$ref": "#/definitions/LogAnalyticsSignals"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "azureMonitorWorkspace": {
          "description": "Azure Monitor Workspace Signal Group",
          "oneOf": [
            {
              "$ref": "#/definitions/AzureMonitorWorkspaceSignals"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "azureResource": {
          "description": "Azure Resource Signal Group",
          "oneOf": [
            {
              "$ref": "#/definitions/AzureResourceSignals"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "dependencies": {
          "description": "Settings for dependency signals to control how the health state of child entities influences the health state of the parent entity.",
          "oneOf": [
            {
              "$ref": "#/definitions/DependenciesSignalGroup"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "type": "object"
    },
    "ThresholdRuleV2": {
      "description": "Threshold-based evaluation rule for a signal definition",
      "properties": {
        "operator": {
          "description": "Operator how to compare the signal value with the threshold",
          "oneOf": [
            {
              "enum": [
                "GreaterThan",
                "LessThan",
                "LessThanOrEqual",
                "GreaterThanOrEqual",
                "Equal",
                "NotEqual"
              ],
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "threshold": {
          "description": "Threshold value",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        }
      },
      "required": [
        "operator",
        "threshold"
      ],
      "type": "object"
    },
    "UserAssignedIdentity": {
      "description": "User assigned identity properties",
      "properties": {},
      "type": "object"
    },
    "healthmodels_authenticationsettings_childResource": {
      "description": "Microsoft.CloudHealth/healthmodels/authenticationsettings",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the authentication setting. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/AuthenticationSettingProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "authenticationsettings"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_discoveryrules_childResource": {
      "description": "Microsoft.CloudHealth/healthmodels/discoveryrules",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the discovery rule. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/DiscoveryRuleProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "discoveryrules"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_entities_childResource": {
      "description": "Microsoft.CloudHealth/healthmodels/entities",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the entity. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/EntityProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "entities"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_relationships_childResource": {
      "description": "Microsoft.CloudHealth/healthmodels/relationships",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the relationship. Must be unique within a health model. For example, a concatenation of parentEntityName and childEntityName can be used as the name.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/RelationshipProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "relationships"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    },
    "healthmodels_signaldefinitions_childResource": {
      "description": "Microsoft.CloudHealth/healthmodels/signaldefinitions",
      "properties": {
        "apiVersion": {
          "enum": [
            "2026-01-01-preview"
          ],
          "type": "string"
        },
        "name": {
          "description": "Name of the signal definition. Must be unique within a health model.",
          "oneOf": [
            {
              "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$",
              "type": "string"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "properties": {
          "description": "The resource-specific properties for this resource.",
          "oneOf": [
            {
              "$ref": "#/definitions/SignalDefinitionProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/common/definitions.json#/definitions/expression"
            }
          ]
        },
        "type": {
          "enum": [
            "signaldefinitions"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "properties",
        "apiVersion",
        "type"
      ],
      "type": "object"
    }
  }
}