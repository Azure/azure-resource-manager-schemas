{
  "tests": [
    {
      "name": "databaseAccounts - minimal resource",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "name": "test",
        "location": "West Us",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0
                    }
            ],
            "databaseAccountOfferType": "Standard"
        }
      }
    },
    {
      "name": "databaseAccounts - resource with Session consistencyPolicy property",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "name": "test",
        "location": "West Us",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0
                    }
            ],
            "databaseAccountOfferType": "Standard",
            "consistencyPolicy": {
                "defaultConsistencyLevel": "Session"
            }
        }
      }
    },
    {
      "name": "databaseAccounts - resource with Strong consistencyPolicy property",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "location": "West Us",
        "name": "test",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0
                    }
            ],
          "databaseAccountOfferType": "Standard",
          "consistencyPolicy": {
            "defaultConsistencyLevel": "Strong"
          }
        }
      }
    },
    {
      "name": "databaseAccounts - resource with bounded staleness consistencyPolicy property",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "location": "West Us",
        "name": "test",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0
                    }
            ],
          "databaseAccountOfferType": "Standard",
          "consistencyPolicy": {
            "defaultConsistencyLevel": "BoundedStaleness",
            "maxStalenessPrefix": 10,
            "maxIntervalInSeconds": 5
          }
        }
      }
    },
    {
      "name": "databaseAccounts - resource with zone redundant location",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "name": "test",
        "location": "West Us",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0,
                        "isZoneRedundant": true
                    }
            ],
            "databaseAccountOfferType": "Standard"
        }
      }
    },
    {
      "name": "databaseAccounts - resource with VNET",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "name": "test",
        "location": "West Us",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0,
                        "isZoneRedundant": true
                    }
            ],
            "virtualNetworkRules": [
              {
                  "id": "/subscriptions/subId/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/vnet1/subnets/subnet1",
                  "ignoreMissingVNetServiceEndpoint": false
              }
            ],
            "isVirtualNetworkFilterEnabled": true,
            "databaseAccountOfferType": "Standard"
        }
      }
    },
    {
      "name": "databaseAccounts - resource without properties property",
      "expectedErrors": [
        {
          "message": "Missing required property: properties",
          "dataPath": "/",
          "schemaPath": "/required/2"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "name": "test",
        "apiVersion": "2015-04-08",
        "location": "West Us"
      }
    },
    {
      "name": "databaseAccounts - resource without required properties",
      "expectedErrors": [
        {
          "message": "Missing required property: name",
          "dataPath": "/",
          "schemaPath": "/properties/properties/required/0"
        },
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/required/1"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "location": "West Us",
        "properties": {
        }
      }
    },
    {
      "name": "databaseAccounts - resource without defaultConsistencyLevel property",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/properties/consistencyPolicy/required/0"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "name": "test",
        "location": "West Us",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0
                    }
            ],
            "name": "test",
            "databaseAccountOfferType": "Standard",
            "consistencyPolicy": {
            }
        }
      }
    },
    {
      "name": "databaseAccounts - resource with invalid name property",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/properties/name/pattern"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "location": "West Us",
        "name": "11111",
        "properties": {
          "databaseAccountOfferType": "Standard"
        }
      }
    },
    {
      "name": "databaseAccounts resource with invalid databaseAccountOfferType property",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/properties/databaseAccountOfferType/type"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "location": "West Us",
        "name": "test",
        "properties": {
            "locations": [
                    {
                        "locationName": "West Us",
                        "failoverPriority": 0
                    }
            ],
            "databaseAccountOfferType": "Invalid"
        }
      }
    },
    {
      "name": "databaseAccounts resource with incomplete boundedStaleness consistencyPolicy property",
      "expectedErrors": [
        {
          "message": "Data does not match any schemas from \"oneOf\"",
          "dataPath": "/properties",
          "schemaPath": "/properties/properties/oneOf"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/databaseAccounts",
      "json": {
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "apiVersion": "2015-04-08",
        "location": "West Us",
        "name": "test",
        "properties": {
          "databaseAccountOfferType": "Standard",
          "consistencyPolicy": {
            "defaultConsistencyLevel": "BoundedStaleness"
          }
        }
      }
    },
    {
      "name": "sqlDatabases - minimal resource",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/sqlDatabases",
      "json": {
        "type": "Microsoft.DocumentDB/sqlDatabases",
        "resource": {
          "id": "test"
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "sqlDatabases - with throughput value",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/sqlDatabases",
      "json": {
        "type": "Microsoft.DocumentDB/sqlDatabases",
        "resource": {
          "id": "test"
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "mongoDBDatabases - with throughput value",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/mongoDBDatabases",
      "json": {
        "type": "Microsoft.DocumentDB/mongoDBDatabases",
        "resource": {
          "id": "test"
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "tables - with throughput value",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/tables",
      "json": {
        "type": "Microsoft.DocumentDB/tables",
        "resource": {
          "id": "test"
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "cassandraKeyspaces - with throughput value",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/cassandraKeyspaces",
      "json": {
        "type": "Microsoft.DocumentDB/cassandraKeyspaces",
        "resource": {
          "id": "test"
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "gremlinDatabases - with throughput value",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/gremlinDatabases",
      "json": {
        "type": "Microsoft.DocumentDB/gremlinDatabases",
        "resource": {
          "id": "test"
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "sqlContainers",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/sqlContainers",
      "json": {
        "type": "Microsoft.DocumentDB/sqlContainers",
        "resource": {
          "id": "test",
          "indexingPolicy": {
            "automatic": true,
            "indexingMode": "Consistent",
            "includedPaths": [
              {
                "path": "/*",
                "indexes": [
                  {
                    "dataType": "String",
                    "precision": -1,
                    "kind": "Hash"
                  }
                ]
              }
            ],
            "excludedPaths": [
              {
                "path": "/path"
              }
            ]
          },
          "partitionKey": {
            "paths": [
              "/*"
            ],
            "kind": "Range"
          },
          "defaultTtl": 1000,
          "uniqueKeyPolicy": {
            "uniqueKeys": [
              {
                "paths": [
                  "/pathA",
                  "/pathB"
                ]
              }
            ]

          },
          "conflictResolutionPolicy": {
            "mode": "LastWriterWins",
            "conflictResolutionPath": "/_ts",
            "conflictResolutionProcedure": ""        
          }
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "mongoDBCollections",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/mongoDBCollections",
      "json": {
        "type": "Microsoft.DocumentDB/mongoDBCollections",
        "resource": {
          "id": "test",
          "shardKey": {
            "user_id": "Hash"
          },
          "indexes": [
            {
              "key": {
                "keys": [
                  "user_address"
                ]
              },
              "options": {
                "expireAfterSeconds": 1000,
                "unique": true
              }
            }
          ]
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "cassandraTables",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/cassandraTables",
      "json": {
        "type": "Microsoft.DocumentDB/cassandraTables",
        "resource": {
          "id": "test",
          "defaultTtl": 1000,
          "schema": {
            "columns": [
              {
                "name": "user_id",
                "type": "Int"
              }
            ],
            "partitionKeys": [
              {
                "name": "user_id"
              }
            ],
            "clusterKeys": [
              {
                "name": "user_id",
                "orderBy": "Asc"
              }
            ]
          }
        },
        "options": {
          "throughput": "1000"
        }
      }
    },
    {
      "name": "gremlinGraphs",
      "definition": "https://schema.management.azure.com/schemas/2015-04-08/Microsoft.DocumentDB.json#/resourceDefinitions/gremlinGraphs",
      "json": {
        "type": "Microsoft.DocumentDB/gremlinGraphs",
        "resource": {
          "id": "test",
          "indexingPolicy": {
            "automatic": true,
            "indexingMode": "Consistent",
            "includedPaths": [
              {
                "path": "/*",
                "indexes": [
                  {
                    "dataType": "String",
                    "precision": -1,
                    "kind": "Hash"
                  }
                ]
              }
            ],
            "excludedPaths": [
              {
                "path": "/path"
              }
            ]
          },
          "partitionKey": {
            "paths": [
              "/*"
            ],
            "kind": "Range"
          },
          "defaultTtl": 1000,
          "uniqueKeyPolicy": {
            "uniqueKeys": [
              {
                "paths": [
                  "/pathA",
                  "/pathB"
                ]
              }
            ]

          },
          "conflictResolutionPolicy": {
            "mode": "LastWriterWins",
            "conflictResolutionPath": "/_ts",
            "conflictResolutionProcedure": ""        
          }
        },
        "options": {
          "throughput": "1000"
        }
      }
    }
  ]
}
