{
  "tests": [
    {
      "name": "clusters - Minimal",
      "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
      "json": {
        "name": "cluster1",
        "type": "Microsoft.Kusto/clusters",
        "apiVersion": "2018-09-07-preview",
        "sku": {
         "name": "L16",
         "tier": "Standard"
        },
        "location": "westus"
      }
    },

    {
      "name": "clusters - Without type property",
      "expectedErrors": [
        {
          "message": "Missing required property: type",
          "dataPath": "/"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
      "json": {
        "name": "cluster1",
        "apiVersion": "2018-09-07-preview",
        "location": "westus",
        "sku": {
         "name": "L16",
         "tier": "Standard"
        }
      }
    },

    {
      "name": "clusters - Without api-version property",
      "expectedErrors": [
        {
          "message": "Missing required property: apiVersion",
          "dataPath": "/"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
      "json": {
        "name": "cluster1",
        "type": "Microsoft.Kusto/clusters",
        "location": "westus",
        "sku": {
         "name": "L16",
         "tier": "Standard"
        }
      }
    },

    {
      "name": "clusters - Without location property",
      "expectedErrors": [
        {
          "message": "Missing required property: location",
          "dataPath": "/"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
      "json": {
        "name": "cluster1",
        "type": "Microsoft.Kusto/clusters",
        "apiVersion": "2018-09-07-preview",
        "sku": {
         "name": "L16",
         "tier": "Standard"
        }
      }
    },

    {
      "name": "clusters - Without sku property",
      "expectedErrors": [
        {
          "message": "Missing required property: sku",
          "dataPath": "/"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
      "json": {
        "name": "cluster1",
        "type": "Microsoft.Kusto/clusters",
        "location": "westus",
        "apiVersion": "2018-09-07-preview"
      }
    },
    {
      "name": "clusters - Without name property",
      "expectedErrors": [
        {
          "message": "Missing required property: name",
          "dataPath": "/"
        }
      ],
      "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
      "json": {
        "type": "Microsoft.Kusto/clusters",
        "sku": {
         "name": "L16",
         "tier": "Standard"
        },
        "location": "westus",
        "apiVersion": "2018-09-07-preview"
      }
    },

    {
        "name": "clusters with databases - Minimal",
        "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters",
        "json": {
          "name": "cluster1",
          "type": "Microsoft.Kusto/clusters",
          "apiVersion": "2018-09-07-preview",
          "sku": {
           "name": "L16",
           "tier": "Standard"
          },
          "location": "westus",
          "resources": [{
            "name": "database - Minimal",
            "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters_databases",
              "type": "Microsoft.Kusto/clusters/databases",
              "apiVersion": "2018-09-07-preview",
              "location": "westus",
              "properties": {
                  "softDeletePeriodInDays": 1,
                  "hotCachePeriodInDays": 1
              }
          }]
        }
      },
      {
        "name": "cluster database event hub",
        "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters_databases_dataConnections",
        "json": {
          "type": "Microsoft.Kusto/clusters/databases/dataconnections",
          "apiVersion": "2018-09-07-preview",
          "name": "eventhubtest1",
          "properties": {
            "kind": "EventHub",
            "properties": {
              "eventHubResourceId": "/subscriptions/f80eb51c-c534-4f0b-80ab-aebc290c1c19/resourceGroups/radennisgeneral/providers/Microsoft.EventHub/namespaces/radenniseg/eventhubs/eventhubeg",
              "consumerGroup": "$Default"
            }
          }
        }
      },
      {
        "name": "cluster database event grid",
        "definition": "https://schema.management.azure.com/schemas/2018-09-07-preview/Microsoft.Kusto.json#/resourceDefinitions/clusters_databases_dataConnections",
        "json": {
          "type": "Microsoft.Kusto/clusters/databases/dataconnections",
          "apiVersion": "2018-09-07-preview",
          "name": "eventgridtest1",
          "properties": {
            "kind": "EventGrid",
            "properties": {
              "storageAccountResourceId": "/subscriptions/11d5f159-a21d-4a6c-8053-c3aae30057cf/resourceGroups/radennistodelete/providers/Microsoft.Storage/storageAccounts/radenniseg",
              "eventHubResourceId": "/subscriptions/f80eb51c-c534-4f0b-80ab-aebc290c1c19/resourceGroups/radennisgeneral/providers/Microsoft.EventHub/namespaces/radenniseg/eventhubs/eventhubeg",
              "consumerGroup": "$Default",
              "tableName": "tablename1",
              "dataFormat": "CSV"
            }
          }
        }
      }
  ]
}
