{
  "tests": [
    {
      "name": "minimal account resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/accounts",
      "json": {
        "name": "account1",
        "type": "Microsoft.CloudTest/accounts",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "contacts": [
            "clippy@microsoft.com"
          ],
          "accessControlUsers": [],
          "maxConcurrentSessionsPerAccount": 500,
          "maxConcurrentSessionsPerUser": 100,
          "maxConcurrentSessionsPerSystemAccount": 150,
          "systemAccounts": [],
          "retryOnFailureMode": "None",
          "summaryEmail": "Enabled",
          "vstsTestResultAttachmentUploadBehavior": "OnlyOnFailure",
          "testLogCompression": "Enabled"
        }
      }
    },
    {
      "name": "minimal container image resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/images",
      "json": {
        "name": "containerImage",
        "type": "Microsoft.CloudTest/images",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "imageType": "Container",
          "image": "clippy.azurecr.io/clippyDistro:42",
          "osType": "Linux",
          "cpuCores": 4,
          "memoryInGb": 16,
          "subscriptionId": "1d7caf52-4812-4e8c-a5df-1945a6e63542"
        }
      }
    },
    {
      "name": "minimal gallery image resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/images",
      "json": {
        "name": "image1",
        "type": "Microsoft.CloudTest/images",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "imageType": "Gallery",
          "resourceId": "MicrosoftWindowsServer/WindowsServer/2019-datacenter-with-containers-g2/latest"
        }
      }
    },
    {
      "name": "gallery image resource with optional properties",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/images",
      "json": {
        "name": "myImage",
        "type": "Microsoft.CloudTest/images",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "imageType": "Gallery",
          "resourceId": "MicrosoftWindowsServer/WindowsServer/2019-datacenter-with-containers-g2/latest",
          "provisioningScriptUrl": "https://clippy.blob.core.windows.net/clippy",
          "provisioningScriptVersion": "0.0.1"
        }
      }
    },
    {
      "name": "minimal generic image resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/images",
      "json": {
        "name": "myImage",
        "type": "Microsoft.CloudTest/images",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "imageType": "Generic",
          "genericProperties": {
            "prop1": "val-1",
            "prop2": "val-2"
          }
        }
      }
    },
    {
      "name": "minimal managed image resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/images",
      "json": {
        "name": "myImage",
        "type": "Microsoft.CloudTest/images",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "imageType": "Managed",
          "baseImage": "MicrosoftWindowsServer/WindowsServer/2019-datacenter-with-containers-g2/latest",
          "artifacts": [
            {
              "name": "windows-vcredist-x64"
            }
          ]
        }
      }
    },
    {
      "name": "managed image resource with optional properties",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/images",
      "json": {
        "name": "myImage",
        "type": "Microsoft.CloudTest/images",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "imageType": "Managed",
          "baseImage": "MicrosoftWindowsServer/WindowsServer/2019-datacenter-with-containers-g2/latest",
          "artifacts": [
            {
              "name": "windows-vcredist-x64"
            },
            {
              "name": "linux-tdnf-install-packages",
              "parameters": {
                "packages": "git"
              }
            }
          ],
          "subscriptionId": "cd5d11a2-5410-4045-b486-f3a5c2bb0302",
          "buildProfile": {
            "runAsSystem": true
          },
          "diskSize": 42,
          "platform": "Windows",
          "artifactSource": {
            "azureDevOpsUrl": "https://clippy.visualstudio.com/clippy",
            "artifactRepo": "clippy",
            "artifactFolder": "clippy",
            "artifactBranch": "clippy",
            "accessToken": "https://clippy.vault.azure.net/secrets/clippy"
          },
          "contacts": "clippy@microsoft.com",
          "publishingProfile": {
            "targetRegions": [
              {
                "name": "westus3",
                "replicas": 2
              }
            ],
            "computeGalleries": [
              {
                "computeGalleryId": "my/compute/gallery/resource/id"
              }
            ],
            "storageAccounts2": [
              {
                "storageAccountId": "my/storage/account/resource/id"
              }
            ]
          },
          "revision": "42",
          "validationQuery": "TestSession | where PreciseTimeStamp > ago(2d) | where TenantName == \"clippy\" | where Result == \"Passed\" | take 1 | project TenantName, TestSessionID",
          "validationProfile": {
            "validationPipelines": {
              "organization": "https://clippy.visualstudio.com/",
              "project": "Clippy",
              "definitionId": 11111
            }
          },
          "scheduleProfile": {
            "cronExpression": "0 * * * 6"
          },
          "managementProfile": {
            "retainedVersionCount": 20
          },
          "versionOverride": "42",
          "provisioningScriptUrl": "https://clippy.blob.core.windows.net/clippy",
          "provisioningScriptVersion": "0.0.1"
        }
      }
    },
    {
      "name": "minimal cloudtest pool resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/pools",
      "json": {
        "name": "cloudtestpool1",
        "type": "Microsoft.CloudTest/pools",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "sku": {
            "name": "mySku",
            "type": "AzureSku"
          },
          "images": [
            {
              "imageName": "image1",
              "poolBufferPercentage": "100",
              "subscriptionId": "mySubscription"
            }
          ],
          "maxPoolSize": 10
        }
      }
    },
    {
      "name": "cloudtest pool resource with optional properties",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/pools",
      "json": {
        "name": "cloudtestpool1",
        "type": "Microsoft.CloudTest/pools",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "accounts": [
            "testaccount"
          ],
          "allocationPriorityFormula": "Fifo",
          "allocationProfile": {
            "allocationScheme": "Absolute"
          },
          "sku": {
            "name": "mySku",
            "type": "AzureSku"
          },
          "images": [
            {
              "imageName": "image1",
              "poolBufferPercentage": "100",
              "subscriptionId": "mySubscription"
            }
          ],
          "maxPoolSize": 10
        }
      }
    },
    {
      "name": "minimal hosted pool resource",
      "definition": "https://schema.management.azure.com/schemas/2020-05-07/Microsoft.CloudTest.json#/resourceDefinitions/hostedpools",
      "json": {
        "name": "hostedpool1",
        "type": "Microsoft.CloudTest/hostedpools",
        "apiVersion": "2020-05-07",
        "location": "westus2",
        "properties": {
          "sku": {
            "name": "mySku",
            "type": "AzureSku"
          },
          "images": [
            {
              "imageName": "image1",
              "poolBufferPercentage": "100",
              "subscriptionId": "mySubscription"
            }
          ],
          "maxPoolSize": 10,
          "agentProfile": {
            "type": "Stateless"
          }
        }
      }
    }
  ]
}